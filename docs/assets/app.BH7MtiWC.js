import{r as $t,a as kt,s as f,p as ft,m as Fe,l as _e,b as zt,o as tt,c as at,d as pt,e as Ie,f as xt,g as rt,h as Gt,i as At,j as Ft,k as Xt,n as yt,q as bt,t as Dt,u as et,v as vt,w as Rt,x as nt,y as Ct,z as Ut}from"./vendor.V2Js9SfJ.js";var ot={exports:{}},Ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nt;function jt(){if(Nt)return Ze;Nt=1;var k=$t(),b=Symbol.for("react.element"),u=Symbol.for("react.fragment"),z=Object.prototype.hasOwnProperty,p=k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function C(_,l,P){var ae,X={},se=null,G=null;P!==void 0&&(se=""+P),l.key!==void 0&&(se=""+l.key),l.ref!==void 0&&(G=l.ref);for(ae in l)z.call(l,ae)&&!x.hasOwnProperty(ae)&&(X[ae]=l[ae]);if(_&&_.defaultProps)for(ae in l=_.defaultProps,l)X[ae]===void 0&&(X[ae]=l[ae]);return{$$typeof:b,type:_,key:se,ref:G,props:X,_owner:p.current}}return Ze.Fragment=u,Ze.jsx=C,Ze.jsxs=C,Ze}var Mt;function Et(){return Mt||(Mt=1,ot.exports=jt()),ot.exports}var U=Et(),Q=$t(),Qe={},St;function It(){if(St)return Qe;St=1;var k=kt();return Qe.createRoot=k.createRoot,Qe.hydrateRoot=k.hydrateRoot,Qe}var Bt=It();const je=JSON.parse('[{"series":"500","model":"GTX 590","cudaCores":1024,"vram":3,"releaseYear":2011,"flagship":false,"specialFlagship":true,"msrp":699,"dieName":"2x GF110","manufacturingNode":40},{"series":"500","model":"GTX 580","cudaCores":512,"vram":1.5,"releaseYear":2010,"flagship":true,"msrp":499,"dieName":"GF110","manufacturingNode":40},{"series":"500","model":"GTX 570","cudaCores":480,"vram":1.25,"releaseYear":2010,"flagship":false,"msrp":349,"dieName":"GF110","manufacturingNode":40},{"series":"500","model":"GTX 560 Ti","cudaCores":384,"vram":1,"releaseYear":2011,"flagship":false,"msrp":249,"dieName":"GF114","manufacturingNode":40},{"series":"500","model":"GTX 560","cudaCores":336,"vram":1,"releaseYear":2011,"flagship":false,"msrp":199,"dieName":"GF114","manufacturingNode":40},{"series":"500","model":"GTX 550 Ti","cudaCores":192,"vram":1,"releaseYear":2011,"flagship":false,"msrp":149,"dieName":"GF116","manufacturingNode":40},{"series":"600","model":"GTX 690","cudaCores":3072,"vram":4,"releaseYear":2012,"flagship":false,"specialFlagship":true,"msrp":1000,"dieName":"2x GK104","manufacturingNode":28},{"series":"600","model":"GTX 680","cudaCores":1536,"vram":2,"releaseYear":2012,"flagship":true,"msrp":500,"dieName":"GK104","manufacturingNode":28},{"series":"600","model":"GTX 670","cudaCores":1344,"vram":2,"releaseYear":2012,"flagship":false,"msrp":400,"dieName":"GK104","manufacturingNode":28},{"series":"600","model":"GTX 660 Ti","cudaCores":1344,"vram":2,"releaseYear":2012,"flagship":false,"msrp":300,"dieName":"GK104","manufacturingNode":28},{"series":"600","model":"GTX 660","cudaCores":960,"vram":2,"releaseYear":2012,"flagship":false,"msrp":230,"dieName":"GK106","manufacturingNode":28},{"series":"600","model":"GTX 650 Ti","cudaCores":768,"vram":1,"releaseYear":2012,"flagship":false,"msrp":150,"dieName":"GK106","manufacturingNode":28},{"series":"600","model":"GTX 650","cudaCores":384,"vram":1,"releaseYear":2012,"flagship":false,"msrp":110,"dieName":"GK107","manufacturingNode":28},{"series":"700","model":"GTX 780 Ti","cudaCores":2880,"vram":3,"releaseYear":2013,"flagship":false,"specialFlagship":true,"msrp":699,"dieName":"GK110","manufacturingNode":28},{"series":"700","model":"GTX 780","cudaCores":2304,"vram":3,"releaseYear":2013,"flagship":true,"msrp":649,"dieName":"GK110","manufacturingNode":28},{"series":"700","model":"GTX 770","cudaCores":1536,"vram":2,"releaseYear":2013,"flagship":false,"msrp":399,"dieName":"GK104","manufacturingNode":28},{"series":"700","model":"GTX 760","cudaCores":1152,"vram":2,"releaseYear":2013,"flagship":false,"msrp":249,"dieName":"GK104","manufacturingNode":28},{"series":"700","model":"GTX 750 Ti","cudaCores":640,"vram":2,"releaseYear":2014,"flagship":false,"msrp":149,"dieName":"GM107","manufacturingNode":28},{"series":"700","model":"GTX 750","cudaCores":512,"vram":1,"releaseYear":2014,"flagship":false,"msrp":119,"dieName":"GM107","manufacturingNode":28},{"series":"900","model":"GTX 980 Ti","cudaCores":2816,"vram":6,"releaseYear":2015,"flagship":false,"specialFlagship":true,"msrp":649,"dieName":"GM200","manufacturingNode":28},{"series":"900","model":"GTX 980","cudaCores":2048,"vram":4,"releaseYear":2014,"flagship":true,"msrp":549,"dieName":"GM204","manufacturingNode":28},{"series":"900","model":"GTX 970","cudaCores":1664,"vram":4,"releaseYear":2014,"flagship":false,"msrp":329,"dieName":"GM204","manufacturingNode":28},{"series":"900","model":"GTX 960","cudaCores":1024,"vram":2,"releaseYear":2015,"flagship":false,"msrp":199,"dieName":"GM206","manufacturingNode":28},{"series":"900","model":"GTX 950","cudaCores":768,"vram":2,"releaseYear":2015,"flagship":false,"msrp":159,"dieName":"GM206","manufacturingNode":28},{"series":"500","model":"GT 530","cudaCores":96,"vram":2,"releaseYear":2011,"flagship":false,"specialFlagship":false,"msrp":null,"dieName":"GF108","manufacturingNode":40},{"series":"600","model":"GT 630","cudaCores":96,"vram":2,"releaseYear":2012,"flagship":false,"specialFlagship":false,"msrp":60,"dieName":"GF108","manufacturingNode":40},{"series":"700","model":"GT 730","cudaCores":384,"vram":2,"releaseYear":2014,"flagship":false,"specialFlagship":false,"msrp":70,"dieName":"GK208","manufacturingNode":28},{"series":"1000","model":"GT 1030","cudaCores":384,"vram":2,"releaseYear":2017,"flagship":false,"specialFlagship":false,"msrp":70,"dieName":"GP108","manufacturingNode":14},{"series":"1600","model":"GTX 1630","cudaCores":512,"vram":4,"releaseYear":2022,"flagship":false,"specialFlagship":false,"msrp":150,"dieName":"TU117","manufacturingNode":12},{"series":"1000","model":"GTX 1080 Ti","cudaCores":3584,"vram":11,"releaseYear":2017,"flagship":false,"specialFlagship":true,"msrp":699,"dieName":"GP102","manufacturingNode":16},{"series":"1600","model":"GTX 1650","cudaCores":896,"vram":4,"releaseYear":2019,"flagship":false,"msrp":149,"dieName":"TU117","manufacturingNode":12},{"series":"1600","model":"GTX 1660","cudaCores":1408,"vram":6,"releaseYear":2019,"flagship":false,"msrp":219,"dieName":"TU116","manufacturingNode":12},{"series":"1600","model":"GTX 1660 Ti","cudaCores":1536,"vram":6,"releaseYear":2019,"flagship":false,"specialFlagship":false,"msrp":279,"dieName":"TU116","manufacturingNode":12},{"series":"1000","model":"GTX 1080","cudaCores":2560,"vram":8,"releaseYear":2016,"flagship":true,"msrp":599,"dieName":"GP104","manufacturingNode":16},{"series":"1000","model":"GTX 1070 Ti","cudaCores":2432,"vram":8,"releaseYear":2017,"flagship":false,"msrp":449,"dieName":"GP104","manufacturingNode":16},{"series":"1000","model":"GTX 1070","cudaCores":1920,"vram":8,"releaseYear":2016,"flagship":false,"msrp":379,"dieName":"GP104","manufacturingNode":16},{"series":"1000","model":"GTX 1060","cudaCores":1280,"vram":6,"releaseYear":2016,"flagship":false,"msrp":299,"dieName":"GP106","manufacturingNode":16},{"series":"1000","model":"GTX 1050 Ti","cudaCores":768,"vram":4,"releaseYear":2016,"flagship":false,"msrp":139,"dieName":"GP107","manufacturingNode":14},{"series":"1000","model":"GTX 1050","cudaCores":640,"vram":2,"releaseYear":2016,"flagship":false,"msrp":109,"dieName":"GP107","manufacturingNode":14},{"series":"2000","model":"RTX 2080 Ti","cudaCores":4352,"vram":11,"releaseYear":2018,"flagship":true,"msrp":999,"dieName":"TU102","manufacturingNode":12},{"series":"2000","model":"RTX 2080","cudaCores":2944,"vram":8,"releaseYear":2018,"flagship":false,"msrp":699,"dieName":"TU104","manufacturingNode":12},{"series":"2000","model":"RTX 2070","cudaCores":2304,"vram":8,"releaseYear":2018,"flagship":false,"msrp":499,"dieName":"TU106","manufacturingNode":12},{"series":"2000","model":"RTX 2060 Super","cudaCores":2176,"vram":8,"releaseYear":2019,"flagship":false,"msrp":399,"dieName":"TU106","manufacturingNode":12},{"series":"3000","model":"RTX 3090 TI","cudaCores":10752,"vram":24,"releaseYear":2022,"flagship":false,"specialFlagship":true,"msrp":1999,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3090","cudaCores":10496,"vram":24,"releaseYear":2020,"flagship":true,"msrp":1499,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3080 Ti","cudaCores":10240,"vram":12,"releaseYear":2021,"flagship":false,"msrp":1199,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3080","cudaCores":8704,"vram":10,"releaseYear":2020,"flagship":false,"msrp":699,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3070 Ti","cudaCores":6144,"vram":8,"releaseYear":2021,"flagship":false,"msrp":599,"dieName":"GA104","manufacturingNode":8},{"series":"3000","model":"RTX 3070","cudaCores":5888,"vram":8,"releaseYear":2020,"flagship":false,"msrp":499,"dieName":"GA104","manufacturingNode":8},{"series":"3000","model":"RTX 3060 Ti","cudaCores":4864,"vram":8,"releaseYear":2020,"flagship":false,"msrp":399,"dieName":"GA104","manufacturingNode":8},{"series":"3000","model":"RTX 3060","cudaCores":3584,"vram":12,"releaseYear":2021,"flagship":false,"msrp":329,"dieName":"GA106","manufacturingNode":8},{"series":"3000","model":"RTX 3050","cudaCores":2560,"vram":8,"releaseYear":2022,"flagship":false,"msrp":249,"dieName":"GA106","manufacturingNode":8},{"series":"4000","model":"RTX 4090","cudaCores":16384,"vram":24,"releaseYear":2022,"flagship":true,"msrp":1599,"dieName":"AD102","manufacturingNode":5},{"series":"4000","model":"RTX 4080","cudaCores":9728,"vram":16,"releaseYear":2022,"flagship":false,"msrp":1199,"dieName":"AD103","manufacturingNode":5},{"series":"4000","model":"RTX 4070 Ti","cudaCores":7680,"vram":12,"releaseYear":2023,"flagship":false,"msrp":799,"dieName":"AD104","manufacturingNode":5},{"series":"4000","model":"RTX 4070","cudaCores":5888,"vram":12,"releaseYear":2023,"flagship":false,"msrp":599,"dieName":"AD104","manufacturingNode":5},{"series":"4000","model":"RTX 4060 Ti","cudaCores":4352,"vram":16,"releaseYear":2023,"flagship":false,"msrp":499,"dieName":"AD106","manufacturingNode":5},{"series":"4000","model":"RTX 4060","cudaCores":3072,"vram":8,"releaseYear":2023,"flagship":false,"msrp":299,"dieName":"AD107","manufacturingNode":5},{"series":"5000","model":"RTX 5090","cudaCores":21760,"vram":32,"releaseYear":2025,"flagship":true,"specialFlagship":false,"msrp":1999,"dieName":"GB202","manufacturingNode":5},{"series":"5000","model":"RTX 5080","cudaCores":10752,"vram":16,"releaseYear":2025,"flagship":false,"msrp":999,"dieName":"GB203","manufacturingNode":5},{"series":"5000","model":"RTX 5070 Ti","cudaCores":8960,"vram":16,"releaseYear":2025,"flagship":false,"msrp":799,"dieName":"GB203","manufacturingNode":5},{"series":"5000","model":"RTX 5070","cudaCores":6144,"vram":12,"releaseYear":2025,"flagship":false,"msrp":549,"dieName":"GB205","manufacturingNode":5},{"series":"5000","model":"RTX 5060 Ti","cudaCores":4608,"vram":16,"releaseYear":2025,"flagship":false,"msrp":429,"dieName":"GB206","manufacturingNode":5},{"series":"5000","model":"RTX 5060","cudaCores":3840,"vram":8,"releaseYear":2025,"flagship":false,"msrp":299,"dieName":"GB206","manufacturingNode":5}]'),Je=[{platform:"PlayStation",name:"PlayStation",launchYear:1994,launchPriceUSD:299,memory:"1/1024",storage:"Memory Card",nodeNM:null},{platform:"PlayStation",name:"PlayStation 2",launchYear:2e3,launchPriceUSD:299,memory:"4/1024",storage:"Memory Card / Optional HDD",nodeNM:250},{platform:"PlayStation",name:"PlayStation 3",launchYear:2006,launchPriceUSD:599,memory:"256/1024",storage:"60GB HDD",nodeNM:90},{platform:"PlayStation",name:"PlayStation 4",launchYear:2013,launchPriceUSD:399,memory:"8",storage:"500GB HDD",nodeNM:28},{platform:"PlayStation",name:"PlayStation 4 Pro",launchYear:2016,launchPriceUSD:399,memory:"8",storage:"1TB HDD",nodeNM:16},{platform:"PlayStation",name:"PlayStation 5",launchYear:2020,launchPriceUSD:499,memory:"16",storage:"825GB SSD",nodeNM:7},{platform:"PlayStation",name:"PlayStation 5 Pro",launchYear:2024,launchPriceUSD:699,memory:"16",storage:"2TB SSD",nodeNM:7},{platform:"Xbox",name:"Xbox",launchYear:2001,launchPriceUSD:299,memory:"64/1024",storage:"8GB HDD",nodeNM:180},{platform:"Xbox",name:"Xbox 360",launchYear:2005,launchPriceUSD:399,memory:"512/1024",storage:"20GB HDD",nodeNM:90},{platform:"Xbox",name:"Xbox One",launchYear:2013,launchPriceUSD:499,memory:"8",storage:"500GB HDD",nodeNM:28},{platform:"Xbox",name:"Xbox One X",launchYear:2017,launchPriceUSD:499,memory:"12",storage:"1TB HDD",nodeNM:16},{platform:"Xbox",name:"Xbox Series X",launchYear:2020,launchPriceUSD:499,memory:"16",storage:"1TB SSD",nodeNM:7}],Wt={fullCudaCores:512,dieSizeMM2:520,generation:"Fermi"},_t={fullCudaCores:384,dieSizeMM2:332,generation:"Fermi"},Vt={fullCudaCores:192,dieSizeMM2:238,generation:"Fermi"},Lt={fullCudaCores:96,dieSizeMM2:116,generation:"Fermi"},qt={fullCudaCores:1536,dieSizeMM2:294,generation:"Kepler"},Ot={fullCudaCores:960,dieSizeMM2:214,generation:"Kepler"},Ht={fullCudaCores:384,dieSizeMM2:118,generation:"Kepler"},Kt={fullCudaCores:2880,dieSizeMM2:561,generation:"Kepler"},Zt={fullCudaCores:640,dieSizeMM2:148,generation:"Maxwell"},Jt={fullCudaCores:3072,dieSizeMM2:601,generation:"Maxwell"},Qt={fullCudaCores:2048,dieSizeMM2:398,generation:"Maxwell"},ea={fullCudaCores:1024,dieSizeMM2:228,generation:"Maxwell"},ta={fullCudaCores:384,dieSizeMM2:74,generation:"Pascal"},aa={fullCudaCores:3840,dieSizeMM2:471,generation:"Pascal"},ra={fullCudaCores:2560,dieSizeMM2:314,generation:"Pascal"},sa={fullCudaCores:1280,dieSizeMM2:200,generation:"Pascal"},ia={fullCudaCores:768,dieSizeMM2:132,generation:"Pascal"},na={fullCudaCores:1024,dieSizeMM2:200,generation:"Turing"},oa={fullCudaCores:1536,dieSizeMM2:284,generation:"Turing"},la={fullCudaCores:4608,dieSizeMM2:754,generation:"Turing"},ca={fullCudaCores:3072,dieSizeMM2:545,generation:"Turing"},da={fullCudaCores:2304,dieSizeMM2:445,generation:"Turing"},fa={fullCudaCores:10752,dieSizeMM2:628.4,generation:"Ampere"},pa={fullCudaCores:6144,dieSizeMM2:392.5,generation:"Ampere"},ma={fullCudaCores:3840,dieSizeMM2:276,generation:"Ampere"},ua={fullCudaCores:18432,dieSizeMM2:609,generation:"Ada Lovelace"},ga={fullCudaCores:10240,dieSizeMM2:379,generation:"Ada Lovelace"},ha={fullCudaCores:7680,dieSizeMM2:294,generation:"Ada Lovelace"},xa={fullCudaCores:4608,dieSizeMM2:188,generation:"Ada Lovelace"},ya={fullCudaCores:3072,dieSizeMM2:159,generation:"Ada Lovelace"},ba={fullCudaCores:21760,dieSizeMM2:750,generation:"Blackwell"},va={fullCudaCores:10752,dieSizeMM2:378,generation:"Blackwell"},Ca={fullCudaCores:8960,dieSizeMM2:263,generation:"Blackwell"},Na={fullCudaCores:6144,dieSizeMM2:181,generation:"Blackwell"},Ma={fullCudaCores:4608,dieSizeMM2:143,generation:"Blackwell"},Sa={GF110:Wt,GF114:_t,GF116:Vt,GF108:Lt,GK104:qt,GK106:Ot,GK107:Ht,GK110:Kt,GM107:Zt,GM200:Jt,GM204:Qt,GM206:ea,GP108:ta,GP102:aa,GP104:ra,GP106:sa,GP107:ia,TU117:na,TU116:oa,TU102:la,TU104:ca,TU106:da,GA102:fa,GA104:pa,GA106:ma,AD102:ua,AD103:ga,AD104:ha,AD106:xa,AD107:ya,GB202:ba,GB203:va,GB205:Ca,GB206:Na,GB207:Ma};function $a({svgRef:k,gpuData:b,columnOrder:u,getTierFromModel:z,toggleMode:p,useLogScale:x,specialFlagshipActive:C,setSpecialFlagshipActive:_,activeGenerations:l,setActiveGenerations:P,showAllCudaGenerations:ae,setShowAllCudaGenerations:X}){return Q.useEffect(()=>{if(!b||!u||!z||!k.current){console.warn("CudaPlot: Missing required props or ref.");return}const se=f(k.current);se.selectAll("*").remove();const G={top:60,right:250,bottom:50,left:90},ve=900-G.left-G.right,q=450-G.top-G.bottom;se.attr("width",ve+G.left+G.right).attr("height",q+G.top+G.bottom),se.append("rect").attr("x",G.left-10).attr("y",G.top-10).attr("width",ve+20).attr("height",q+20).attr("rx",15).attr("ry",15).attr("fill","transparent").attr("class","chart-background");const B=se.append("g").attr("transform",`translate(${G.left},${G.top})`);f("body").select(".tooltip-container").size()?f(".tooltip-container").style("visibility","hidden"):f("body").append("div").attr("class","tooltip-container").style("position","absolute").style("visibility","hidden");const W=ft().domain(u).range([0,ve]).padding(.5),ee=Fe(b,t=>t.cudaCores||0),K=Math.ceil(ee/1e3)*1e3,$e=(t=>{if(!t||t<=0)return 1e3;const y=Math.floor(Math.log10(t))+1,g=Math.pow(10,y-1);return Math.ceil(t/g)*g})(ee);let j;p?j=_e().domain([0,110]).range([q,0]):x?j=zt().domain([100,$e]).range([q,0]):j=_e().domain([0,K]).range([q,0]);const he=Array.from(new Set(b.map(t=>t.series))).map(t=>{const y=b.filter(D=>D.series===t),g=y.length>0?Math.min(...y.map(D=>D.releaseYear)):0;return{series:t,releaseYear:g,seriesNum:parseInt(t,10)||0}}).sort((t,y)=>t.releaseYear!==y.releaseYear?t.releaseYear-y.releaseYear:t.seriesNum-y.seriesNum).map(t=>t.series),Z=tt(at).domain(he),Y=pt(W).tickFormat(t=>t==="90 Ti"&&p?"Flagship":`xx${t}`);B.append("g").attr("class","x-axis").attr("transform",`translate(0,${q})`).call(Y).selectAll("text").style("text-anchor","middle").attr("dy","1em"),B.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",ve/2).attr("y",q+40).attr("fill","#ddd").style("font-size","12px").text("GPU Class");let T;p?T=Ie(j).tickFormat(t=>`${t}%`):x?T=Ie(j).tickFormat(t=>xt(",")(t)):T=Ie(j).tickFormat(t=>xt(",")(t)),B.append("g").attr("class","y-axis").call(T),B.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",p?-45:-55).attr("x",-340/2).attr("fill","#ddd").style("font-size","12px").text(p?"Percentage of Flagship CUDA Cores":x?"Number of CUDA Cores (Log Scale)":"Number of CUDA Cores");const J=Ie(j).tickSize(-560).tickFormat("");B.append("g").attr("class","grid").call(J).selectAll("line").attr("stroke","#e0e0e0").attr("stroke-opacity",.7),B.select(".grid .domain").remove();const ue={};u.forEach(t=>{ue[t]=[]});const Ge=b.filter(t=>t.series==="2000"),oe=Ge.find(t=>t.flagship),le=Ge.find(t=>t.specialFlagship),Xe=C[2e3]&&le,Me=Xe?le:oe;C[2e3]!==C[1600]&&_(t=>({...t,1600:C[2e3]})),he.forEach(t=>{if(l[t]===!1)return;const y=b.filter(r=>r.series===t);let g=y.find(r=>r.flagship),D=y.find(r=>r.specialFlagship),c=C[t]&&D,N;if(t==="1600"&&Me?Me.cudaCores==null||Me.cudaCores<=0?(console.warn(`2000 series flagship (${Me.model}) has invalid CUDA cores. Cannot normalize 1600 series.`),N=y.find(r=>r.flagship)):N=Me:N=c?D:g,!N||N.cudaCores==null||N.cudaCores<=0){const r=[...y].sort((M,H)=>(H.cudaCores||0)-(M.cudaCores||0))[0];if(!r||r.cudaCores==null||r.cudaCores<=0){console.warn(`No valid flagship (or fallback) found for series ${t}. Skipping.`);return}N=r,console.warn(`No explicit flagship for series ${t}. Using ${N.model} as fallback.`)}const re=N.cudaCores,S=z(N.model);if(u.indexOf(S)===-1){console.warn(`Flagship tier "${S}" for series ${t} not found in columnOrder. Skipping series.`);return}const L=y.map(r=>{const M=z(r.model),H=u.indexOf(M),ne=r.cudaCores!=null&&re>0?r.cudaCores/re*100:null;return{...r,normalizedCores:ne,tier:M,columnIndex:H}}).filter(r=>{const M=c&&r.specialFlagship||!c&&r.flagship,H=p&&t==="1600"&&r.series==="2000"&&(r.flagship||r.specialFlagship)&&l[1600]!==!1&&l[2e3]!==!1,ne=!r.flagship&&!r.specialFlagship,a=t!=="1600"&&M,o=r.cudaCores!=null&&r.cudaCores>0,m=r.columnIndex!==-1,F=!p||r.normalizedCores!==null;return(ne||a||H)&&o&&F&&m}).sort((r,M)=>r.columnIndex-M.columnIndex),O=L,ye=L.filter(r=>r.cudaCores!=null&&(p?r.normalizedCores!==null:r.cudaCores>0)),be=rt().defined(r=>r.normalizedCores!==null).x(r=>{const M=c&&r.specialFlagship||!c&&r.flagship,H=p&&t==="1600"&&r.series==="2000"&&(r.flagship||r.specialFlagship),ne=t==="1600"&&r.series==="1600";if(!p||!M&&!H||ne){const a=W(u[r.columnIndex]);return a!==void 0?a:null}else{const a=u.indexOf("90 Ti");if(a!==-1&&(t!=="1600"&&M||H))return W(u[a]);const o=W(u[r.columnIndex]);return o!==void 0?o:null}}).y(r=>{const M=p?r.normalizedCores:r.cudaCores;if(!p&&x&&(M==null||M<=0)||p&&M==null)return null;const H=j(M);return H!==void 0?H:null});B.append("path").datum(O).attr("class","series-line").attr("fill","none").attr("stroke",Z(t)).attr("stroke-width",2).attr("d",be),B.selectAll(`.dot-${t.replace(/\s+/g,"-")}`).data(ye).enter().append("circle").attr("class",`series-dot dot-${t.replace(/\s+/g,"-")}`).attr("cx",r=>{const M=c&&r.specialFlagship||!c&&r.flagship,H=t==="1600"&&r.series==="1600";if(!p||!M||H)return W(u[r.columnIndex]);{const ne=u.indexOf("90 Ti");return W(ne!==-1?u[ne]:u[r.columnIndex])}}).attr("cy",r=>j(p?r.normalizedCores:r.cudaCores)).attr("r",4).attr("fill",Z(t)).append("title").text(r=>{if(p){const M=b.filter(a=>a.series===r.series);let H="";if(r.series==="1600"&&Me)H=Me.model;else{const a=M.find(F=>F.flagship),o=M.find(F=>F.specialFlagship);H=C[r.series]&&o?o.model:a?a.model:"Unknown flagship"}const ne=r.normalizedCores!=null?`${r.normalizedCores.toFixed(1)}%`:"N/A";return`${r.model} (${r.series})
Cores: ${r.cudaCores.toLocaleString()}
Vs ${H}: ${ne}`}else return`${r.model} (${r.series})
Cores: ${r.cudaCores.toLocaleString()}`}),L.forEach(r=>{r.tier&&ue[r.tier]&&r.cudaCores!=null&&(p?r.normalizedCores!==null:r.cudaCores>0)&&ue[r.tier].push(r)})});const ke=b.find(t=>t.model==="GTX 1660 Ti"&&t.series==="1600"),xe=Xe?le:oe;if(p&&ke&&xe&&l[1600]!==!1&&l[2e3]!==!1){const t=xe;if(t&&t.cudaCores>0&&ke.cudaCores!=null&&ke.cudaCores>0){const y=ke.cudaCores/t.cudaCores*100,g=z(ke.model),D=z(t.model);if(g&&D){const c=W(g),N=j(y),re=W("90 Ti"),S=j(100);if(c!==void 0&&N!==void 0&&re!==void 0&&S!==void 0){B.append("path").attr("stroke",Z("1600")).attr("stroke-width",1.5).attr("stroke-dasharray","5,5").attr("fill","none").attr("d",rt()([[c,N],[re,S]]));const A=(c+re)/2,L=(N+S)/2;B.append("text").attr("x",A).attr("y",L-10).attr("text-anchor","middle").attr("font-size","10px").attr("fill","rgba(200, 200, 200, 0.9)")}}}}const ce=B.append("g").attr("class","legend").attr("transform",`translate(${ve+20}, 0)`);ce.append("text").attr("x",60).attr("y",-20).attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("text-anchor","middle").text("GPU Generation");const Te=he.map(t=>{const y=b.filter(c=>c.series===t),g=y.find(c=>c.flagship),D=y.find(c=>c.specialFlagship);return{series:t,regularFlagship:g,specialFlagship:D,activeFlagship:C[t]&&D?D:g}}),ie=ce.selectAll(".legend-item").data(Te).enter().append("g").attr("class","legend-item").attr("transform",(t,y)=>`translate(0, ${y*35})`);ie.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("fill",t=>l[t.series]?Z(t.series):"#555").attr("stroke","#ddd").attr("stroke-width",1).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",t=>l[t.series]?1:.5).on("click",function(t,y){P&&X&&P(g=>{const D={...g,[y.series]:!g[y.series]},c=he.every(N=>D[N]===!0);return X(c),D})}),ie.append("text").attr("x",20).attr("y",12).text(t=>t.series).style("font-size","12px").attr("alignment-baseline","middle").style("font-weight","bold").attr("fill",t=>l[t.series]?"#ddd":"#777").attr("cursor","pointer").on("click",function(t,y){P&&X&&P(g=>{const D={...g,[y.series]:!g[y.series]},c=he.every(N=>D[N]===!0);return X(c),D})}),ie.append("text").attr("x",20).attr("y",27).text(t=>{if(p&&t.series==="1600"){const g=b.filter(c=>c.series==="2000"),D=C[2e3]&&g.find(c=>c.specialFlagship)?g.find(c=>c.specialFlagship):g.find(c=>c.flagship);return D?`Reference: ${D.model}`:"No reference"}const y=C[t.series]&&t.specialFlagship?t.specialFlagship:t.regularFlagship;return y?`Flagship: ${y.model}`:"No flagship"}).style("font-size","10px").attr("alignment-baseline","middle").attr("fill",t=>l[t.series]?"#aaa":"#666").attr("class","flagship-text"),ie.filter(t=>t.specialFlagship).append("rect").attr("x",125).attr("y",17).attr("width",60).attr("height",18).attr("rx",5).attr("ry",5).attr("fill",t=>C[t.series]?"#646cff":"#444").attr("cursor","pointer").attr("class","toggle-btn").on("click",function(t,y){_&&_(g=>({...g,[y.series]:!g[y.series]}))}),ie.filter(t=>t.specialFlagship).append("text").attr("x",155).attr("y",28).text(t=>C[t.series]?"Special":"Regular").style("font-size","10px").style("text-anchor","middle").style("fill","#fff").attr("pointer-events","none").attr("class","toggle-text");const Be=ce.append("g").attr("class","legend-item").attr("transform",`translate(0, ${Te.length*35+10})`);return Be.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",ae?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",function(){if(P&&X){const t=!ae,y={};he.forEach(g=>{y[g]=t}),P(y),X(t)}}),Be.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show All Generations").attr("alignment-baseline","middle"),u.forEach(t=>{W(t)!==void 0&&(ve/u.length,B.append("rect").attr("class","column-overlay").attr("x",W(t)-W.step()/2+W.padding()*W.step()/2).attr("y",0).attr("width",W.step()).attr("height",q).style("pointer-events","all").style("fill","none").on("mousemove",function(g){var re;f(".tooltip-container").style("visibility","visible").style("left",`${g.pageX+15}px`).style("top",`${g.pageY-10}px`);let D="",c=[];t==="90 Ti"&&p?(D='<div class="tooltip-title">Aligned Flagships</div>',c=he.map(S=>{if(l[S]===!1)return null;const A=b.filter(r=>r.series===S),L=C[S];let O;L&&(O=A.find(r=>r.specialFlagship)),O||(O=A.find(r=>r.flagship));const ye=b.filter(r=>r.series==="2000"),be=C[2e3]&&ye.find(r=>r.specialFlagship)?ye.find(r=>r.specialFlagship):ye.find(r=>r.flagship);if(O&&O.cudaCores!=null&&O.cudaCores>0){const r=S==="1600"&&be&&be.cudaCores>0?be:O;if(r.cudaCores!=null&&r.cudaCores>0)return{...O,normalizedCores:O.cudaCores/r.cudaCores*100,series:S}}return null}).filter(Boolean).sort((S,A)=>{const L=parseInt(S.series,10)||0,O=parseInt(A.series,10)||0;return L-O})):(D=`<div class="tooltip-title">xx${t} Class</div>`,c=((re=ue[t])==null?void 0:re.filter(S=>l[S.series]!==!1).sort((S,A)=>{const L=parseInt(S.series,10)||0,O=parseInt(A.series,10)||0;return L-O}))||[]);let N=D;c&&c.length>0?c.forEach(S=>{let A="";if(p){const L=b.filter(M=>M.series===S.series);let O="";const ye=b.filter(M=>M.series==="2000"),be=C[2e3]&&ye.find(M=>M.specialFlagship)?ye.find(M=>M.specialFlagship):ye.find(M=>M.flagship);if(S.series==="1600"&&be)O=be.model;else{const M=L.find(a=>a.flagship),H=L.find(a=>a.specialFlagship);O=C[S.series]&&H?H.model:M?M.model:"Unknown flagship"}const r=S.normalizedCores!=null?`${S.normalizedCores.toFixed(1)}%`:"N/A";A=`Vs ${O}: ${r}`}N+=`
                                 <div class="gpu-item">
                                     <span class="model-name">
                                         <span class="color-indicator" style="background-color: ${Z(S.series)};"></span>
                                         ${S.model}
                                     </span>
                                     <div class="cores-info">
                                         Cores: ${S.cudaCores?S.cudaCores.toLocaleString():"N/A"}<br>
                                         ${p?A:""}
                                     </div>
                                 </div>
                             `}):N+="<div>No active GPUs in this class</div>",f(".tooltip-container").html(N)}).on("mouseout",function(){f(".tooltip-container").style("visibility","hidden")}))}),()=>{f(".tooltip-container").remove()}},[k,b,u,z,p,x,C,_,l,P,ae,X]),U.jsx("svg",{ref:k,style:{display:"block",margin:"20px auto"}})}function Pa({vramSvgRef:k,gpuData:b,consoleData:u,columnOrder:z,getTierFromModel:p,selectedClasses:x,setSelectedClasses:C,showAllClasses:_,setShowAllClasses:l,showConsoleData:P,setShowConsoleData:ae,visibleConsolePlatforms:X,setVisibleConsolePlatforms:se,memoryAllocationPercentage:G,setMemoryAllocationPercentage:ve}){return Q.useEffect(()=>{if(!b||!u||!z||!p||!k.current){console.warn("VramPlot: Missing required props or ref.");return}f("body").select(".vram-tooltip-container").size()||f("body").append("div").attr("class","vram-tooltip-container").style("position","absolute").style("visibility","hidden").style("background-color","rgba(30, 30, 30, 0.9)").style("color","#fff").style("border-radius","8px").style("padding","10px").style("pointer-events","none").style("box-shadow","0 2px 10px rgba(0, 0, 0, 0.3)").style("z-index","10").style("max-width","200px").style("font-size","12px"),f("body").select(".console-tooltip-container").size()||f("body").append("div").attr("class","console-tooltip-container").style("position","absolute").style("visibility","hidden").style("background-color","rgba(30, 30, 30, 0.9)").style("color","#fff").style("border-radius","8px").style("padding","10px").style("pointer-events","none").style("box-shadow","0 2px 10px rgba(0, 0, 0, 0.3)").style("z-index","10").style("max-width","220px").style("font-size","12px");const q=f(k.current);q.selectAll("*").remove();const B={top:60,right:350,bottom:50,left:90},W=1e3-B.left-B.right,ee=450-B.top-B.bottom;q.attr("width",W+B.left+B.right).attr("height",ee+B.top+B.bottom),q.append("rect").attr("x",B.left-10).attr("y",B.top-10).attr("width",W+20).attr("height",ee+20).attr("rx",15).attr("ry",15).attr("fill","transparent").attr("class","chart-background");const K=q.append("g").attr("transform",`translate(${B.left},${B.top})`),Pe=b.filter(a=>{const o=p(a.model);return o&&(x[o]||_)}),$e=Pe.length>0,j=u.filter(a=>a.launchYear>=2005&&X[a.platform]),Ne=$e?Array.from(new Set(Pe.map(a=>a.releaseYear))).sort((a,o)=>a-o):Array.from(new Set(b.map(a=>a.releaseYear))).sort((a,o)=>a-o),he=j.map(a=>a.launchYear),Z=[...new Set([...Ne,...he])].sort((a,o)=>a-o),Y=Z.length>0?Z:[2e3,2025],T=ft().domain(Y).range([0,W]).padding(.5);j.forEach(a=>{if(a.memory&&typeof a.memory=="string"&&a.memory.includes("/")){const[o,m]=a.memory.split("/").map(Number);a.memoryGB=o/m,a.memoryDisplay=`${o} MB`}else a.memory!=null?(a.memoryGB=Number(a.memory),a.memoryDisplay=`${a.memory} GB`):(a.memoryGB=0,a.memoryDisplay="N/A")});const J=$e?Fe(Pe,a=>a.vram):0,ue=Fe(j,a=>a.memoryGB)||0,Ge=Math.max(J,ue),oe=Math.ceil(Ge/5)*5||25,le=_e().domain([0,oe]).range([ee,0]),Xe=pt(T).tickFormat(a=>a);K.append("g").attr("class","x-axis").attr("transform",`translate(0,${ee})`).call(Xe).selectAll("text").style("text-anchor","middle").attr("dy","1em"),K.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",W/2).attr("y",ee+40).attr("fill","#ddd").style("font-size","12px").text("Release Year");const Me=Ie(le).tickFormat(a=>`${a} GB`);K.append("g").attr("class","y-axis").call(Me),K.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-55).attr("x",-340/2).attr("fill","#ddd").style("font-size","12px").text("VRAM (GB)");const ke=Ie(le).tickSize(-560).tickFormat("");if(K.append("g").attr("class","grid").call(ke).selectAll("line").attr("stroke","#e0e0e0").attr("stroke-opacity",.7),K.select(".grid .domain").remove(),!$e&&j.length===0&&K.append("text").attr("x",W/2).attr("y",ee/2).attr("text-anchor","middle").attr("fill","#ddd").style("font-size","14px").text("No data to display based on current filters."),P&&j.length>0){const a={PlayStation:{base:"rgba(0, 112, 209, 0.15)",variant:"rgba(0, 180, 209, 0.15)"},Xbox:{base:"rgba(16, 124, 16, 0.15)",variant:"rgba(16, 190, 120, 0.15)"}},o=K.append("g").attr("class","console-layer"),m={};j.forEach(w=>{m[w.launchYear]||(m[w.launchYear]=[]),m[w.launchYear].push(w)}),Object.values(m).forEach(w=>{w.sort((h,d)=>h.platform.localeCompare(d.platform))});const F=Object.keys(m).map(Number).sort((w,h)=>w-h);F.forEach(w=>{const h=T(w);if(h!==void 0){const d=m[w].map(fe=>fe.name.includes("PS1")||fe.name.includes("PS2")||fe.name.includes("PS3")?fe.memoryGB:fe.memoryGB*(G/100)),we=Math.max(...d),de=le(we);o.append("line").attr("x1",h).attr("y1",0).attr("x2",h).attr("y2",de).attr("stroke","#e0e0e0").attr("stroke-opacity",.5).attr("stroke-width",.5).attr("class","console-year-gridline")}}),F.forEach(w=>{const h=m[w];h.forEach((d,we)=>{var te,Ce;const de=T(d.launchYear);if(de===void 0)return;const fe=le(d.memoryGB),qe=d.name.includes("PS1")||d.name.includes("PS2")||d.name.includes("PS3");let e=fe;if(!qe){const ge=(le(0)-fe)*(G/100);e=le(0)-ge}const n=F.indexOf(w),E=F[n+1];let V=W;if(E){const pe=T(E);pe!==void 0&&(V=pe)}const i=Math.max(V-de,0),s=h.length>1&&we>0,v=s?(te=a[d.platform])==null?void 0:te.variant:(Ce=a[d.platform])==null?void 0:Ce.base,R=s?15+we*12:15;if(m[w].tooltipData||(m[w].tooltipData=[]),m[w].tooltipData.find(pe=>pe.name===d.name)||m[w].tooltipData.push(d),de!==void 0&&i>0&&v){o.append("rect").attr("x",de).attr("y",0).attr("width",i).attr("height",e).attr("fill",v).attr("stroke","none").attr("class","console-rect").attr("data-year",w).on("mouseover",function(ge){f(".console-tooltip-container").style("visibility","visible").style("left",`${ge.pageX+15}px`).style("top",`${ge.pageY-10}px`);const ze=m[w];let Ae="";ze&&ze.tooltipData&&(ze.tooltipData.sort((me,Oe)=>me.platform.localeCompare(Oe.platform)||me.name.localeCompare(Oe.name)),ze.tooltipData.forEach((me,Oe)=>{const Ve=me.nodeNM?`${me.nodeNM}nm`:"N/A";Ae+=`
                                            ${Oe>0?'<hr style="border-top: 1px solid rgba(255,255,255,0.2); margin: 8px 0;">':""}
                                            <div class="tooltip-title">${me.name}</div>
                                            <div class="tooltip-info">
                                                <strong>Year:</strong> ${me.launchYear}<br>
                                                <strong>Launch Price:</strong> $${me.launchPriceUSD}<br>
                                                <strong>Memory:</strong> ${me.memoryDisplay}<br>
                                                <strong>Manufacturing Node:</strong> ${Ve}
                                            </div>
                                        `})),f(".console-tooltip-container").html(Ae),f(this).attr("fill",s?d.platform==="PlayStation"?"rgba(0, 180, 209, 0.3)":"rgba(16, 190, 120, 0.3)":d.platform==="PlayStation"?"rgba(0, 112, 209, 0.3)":"rgba(16, 124, 16, 0.3)")}).on("mouseout",function(){f(".console-tooltip-container").style("visibility","hidden"),f(this).attr("fill",v)});const pe=d.name.includes("360")||d.name.includes("4 Pro")||d.name.includes("One X")||d.name.includes("PS5")||d.name.includes("Series X")||d.name.includes("Series S");if(i>40||pe){let ge;if(d.platform==="PlayStation"){const Ae=d.name.match(/(\d+)/);Ae?(ge="PS"+Ae[1],d.name.includes("Pro")?ge+=" Pro":d.name.includes("Slim")&&(ge+=" Slim")):ge="PS"}else ge=d.name.replace(d.platform+" ",""),pe&&i<=40&&d.name.includes("360")?ge="360":pe&&i<=40&&d.name.includes("One X")?ge="One X":pe&&i<=40&&d.name.includes("Series S")&&(ge="Series S");const ze=Math.min(de+5,de+i-25);if(d.name.includes("4 Pro")&&j.some(me=>me&&me.name&&me.name.includes("One X")&&X.Xbox)){o.append("text").attr("x",ze).attr("y",R).attr("fill","#4a90e2").style("font-size","10px").style("font-weight","bold").text("PS4"),o.append("text").attr("x",ze).attr("y",R+12).attr("fill","#4a90e2").style("font-size","10px").style("font-weight","bold").text("Pro");return}o.append("text").attr("x",ze).attr("y",R).attr("fill",d.platform==="PlayStation"?"#4a90e2":"#4caf50").style("font-size","10px").style("font-weight","bold").text(ge)}}})})}if($e){const a=tt(at).domain(z),o={};z.forEach(m=>{const F=Pe.filter(w=>p(w.model)===m);(x[m]||_)&&F.length>0&&(o[m]=F.sort((w,h)=>w.releaseYear-h.releaseYear))}),Object.entries(o).forEach(([m,F])=>{const w=rt().defined(h=>h.vram!=null&&h.vram>0&&T(h.releaseYear)!==void 0&&le(h.vram)!==void 0).x(h=>T(h.releaseYear)).y(h=>le(h.vram));K.append("path").datum(F).attr("class","series-line").attr("fill","none").attr("stroke",a(m)).attr("stroke-width",1.5).attr("stroke-dasharray","3,3").attr("d",w),K.selectAll(`.vram-dot-${m.replace(/\s+/g,"-")}`).data(F.filter(h=>h.vram!=null&&h.vram>0)).enter().append("circle").attr("class",`vram-dot vram-dot-${m.replace(/\s+/g,"-")}`).attr("cx",h=>T(h.releaseYear)).attr("cy",h=>le(h.vram)).attr("r",4).attr("fill",a(m)).attr("stroke","#fff").attr("stroke-width",.5).on("mouseover",function(h,d){f(".vram-tooltip-container").style("visibility","visible").style("left",`${h.pageX+15}px`).style("top",`${h.pageY-10}px`);const we=`
                            <div class="tooltip-title" style="color: ${a(p(d.model))};">${d.model}</div>
                            <div class="tooltip-info">
                                <strong>Series:</strong> ${d.series} series<br>
                                <strong>VRAM:</strong> ${d.vram} GB<br>
                                <strong>Year:</strong> ${d.releaseYear}<br>
                                <strong>CUDA Cores:</strong> ${d.cudaCores?d.cudaCores.toLocaleString():"N/A"}
                            </div>
                        `;f(".vram-tooltip-container").html(we),f(this).attr("r",6).attr("stroke-width",2)}).on("mouseout",function(){f(".vram-tooltip-container").style("visibility","hidden"),f(this).attr("r",4).attr("stroke-width",.5)})})}const xe=K.append("g").attr("class","vram-legend").attr("transform",`translate(${W+20}, 0)`);xe.append("text").attr("x",40).attr("y",-20).attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("text-anchor","middle").text("GPU Classes");const ce=tt(at).domain(z),Te=xe.selectAll(".legend-item").data(z).enter().append("g").attr("class","legend-item").attr("transform",(a,o)=>`translate(0, ${o*25})`);Te.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",a=>x[a]?ce(a):"#555").attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",a=>x[a]?1:.5).attr("class","class-checkbox").on("click",function(a,o){C&&l&&C(m=>{const F={...m,[o]:!m[o]};return m[o]&&_&&l(!1),z.every(h=>F[h]===!0)&&l(!0),F})}),Te.append("text").attr("x",25).attr("y",12).attr("fill",a=>x[a]?"#ddd":"#777").style("font-size","12px").text(a=>`xx${a}`).attr("cursor","pointer").attr("alignment-baseline","middle").on("click",function(a,o){C&&l&&C(m=>{const F={...m,[o]:!m[o]};return m[o]&&_&&l(!1),z.every(h=>F[h]===!0)&&l(!0),F})});const ie=xe.append("g").attr("class","legend-item").attr("transform",`translate(0, ${z.length*25+10})`);ie.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",_?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",function(){if(C&&l)if(_){const a={};z.forEach(o=>{a[o]=!1}),C(a),l(!1)}else{const a={};z.forEach(o=>{a[o]=!0}),C(a),l(!0)}}),ie.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show All Classes").attr("alignment-baseline","middle");const Be=xe.append("g").attr("class","legend-item").attr("transform",`translate(0, ${z.length*25+40})`);if(Be.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",P?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",function(){ae&&ae(a=>!a)}),Be.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show Console Data").attr("alignment-baseline","middle"),P){const a=xe.append("g").attr("class","platform-legend").attr("transform",`translate(25, ${z.length*25+70})`);a.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("fill",X.PlayStation?"rgba(0, 112, 209, 0.5)":"#555").attr("stroke","#ddd").attr("stroke-width",.5).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",X.PlayStation?1:.5),a.append("text").attr("x",25).attr("y",12).attr("fill",X.PlayStation?"#ddd":"#777").style("font-size","12px").style("cursor","pointer").text("PlayStation"),a.append("rect").attr("x",0).attr("y",0).attr("width",100).attr("height",15).attr("fill","transparent").attr("cursor","pointer").on("click",function(){if(se){const o=!X.PlayStation;se(m=>({...m,PlayStation:o}))}}),a.append("rect").attr("x",0).attr("y",25).attr("width",15).attr("height",15).attr("fill",X.Xbox?"rgba(16, 124, 16, 0.5)":"#555").attr("stroke","#ddd").attr("stroke-width",.5).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",X.Xbox?1:.5),a.append("text").attr("x",25).attr("y",37).attr("fill",X.Xbox?"#ddd":"#777").style("font-size","12px").style("cursor","pointer").text("Xbox"),a.append("rect").attr("x",0).attr("y",25).attr("width",100).attr("height",15).attr("fill","transparent").attr("cursor","pointer").on("click",function(){if(se){const o=!X.Xbox;se(m=>({...m,Xbox:o}))}})}xe.append("text").attr("x",80).attr("y",-20).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("transform","translate(75, 0)").text("Unified Memory");const g=xe.append("g").attr("class","memory-control-group").attr("transform","translate(120, 0)").append("g").attr("class","memory-slider-group"),D=50,c=215,N=14,re=35-N/2;g.append("text").attr("x",35).attr("y",15).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#aaa").text("% dedicated to VRAM");const S=g.append("text").attr("x",35).attr("y",35).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill","#646cff").text(`${G}%`),A=_e().domain([0,100]).range([c,0]).clamp(!0);g.append("rect").attr("x",re).attr("y",D).attr("width",N).attr("height",c).attr("rx",4).attr("fill","rgba(60, 60, 60, 0.3)").attr("stroke","#666").attr("stroke-width",1),[0,25,50,75,100].forEach(a=>{const o=A(a)+D;g.append("line").attr("x1",re-3).attr("y1",o).attr("x2",re+N+3).attr("y2",o).attr("stroke",a===50?"#aaa":"#777").attr("stroke-width",a===50?1.5:1),g.append("text").attr("class","tick-label-text").attr("x",re+N+15).attr("y",o+4).attr("text-anchor","start").style("font-size","10px").attr("fill",a===G?"#646cff":"#aaa").attr("font-weight",a===G?"bold":"normal").text(`${a}%`)});const L=A(G)+D,O=g.append("rect").attr("x",re-4).attr("y",L-7).attr("width",N+8).attr("height",14).attr("rx",7).attr("fill","rgba(100, 108, 255, 0.2)").attr("filter","blur(2px)"),ye=g.append("rect").attr("x",re-3).attr("y",L-6).attr("width",N+6).attr("height",12).attr("rx",6).attr("fill","#646cff").attr("stroke","#ddd").attr("stroke-width",.5).attr("cursor","pointer").attr("class","slider-handle"),be=4,r=(a,o)=>{const m=a+(o==="up"?-3.5:3.5),F=a+(o==="up"?-4-1.5:be+1.5);return isNaN(m)||isNaN(F)?"":`M ${re+N/2-be/2} ${m}
                    L ${re+N/2+be/2} ${m}
                    L ${re+N/2} ${F}Z`},M=g.append("path").attr("class","slider-arrow top-arrow").attr("d",r(L,"up")).attr("fill","#fff"),H=g.append("path").attr("class","slider-arrow bottom-arrow").attr("d",r(L,"down")).attr("fill","#fff"),ne=Gt().on("start",function(){f(this).attr("fill","#535bf2")}).on("start drag",function(a){if(!this.initialDragData){const fe=parseFloat(f(this).attr("y"))+6;this.initialDragData={handlePosition:fe,eventY:a.sourceEvent.clientY}}const o=a.sourceEvent.clientY-this.initialDragData.eventY,m=this.initialDragData.handlePosition+o,F=Math.max(D,Math.min(D+c,m));ye.attr("y",F-6),O.attr("y",F-7),M.attr("d",r(F,"up")),H.attr("d",r(F,"down"));const d=1-(F-D)/c,we=Math.round(d*100),de=Math.max(0,Math.min(100,we));S.text(`${de}%`),g.selectAll(".tick-label-text").attr("fill",fe=>fe===de?"#646cff":"#aaa").attr("font-weight",fe=>fe===de?"bold":"normal"),de!==G&&ve&&ve(de)}).on("end",function(){f(this).attr("fill","#646cff")});return ye.call(ne),xe.append("text").attr("x",0).attr("y",z.length*25+(P?290:240)).attr("fill","#aaa").style("font-size","11px").text("* Colors represent GPU classes"),()=>{f(".vram-tooltip-container").remove(),f(".console-tooltip-container").remove()}},[k,b,u,z,p,x,C,_,l,P,ae,X,se,G,ve]),U.jsx("svg",{ref:k,style:{display:"block",margin:"20px auto"}})}const Ta=2025,wa={2010:218.056,2011:224.939,2012:229.594,2013:232.957,2014:236.736,2015:237.017,2016:240.007,2017:245.12,2018:251.107,2019:255.657,2020:258.811,2021:270.97,2022:292.656,2023:303.682,2024:313.2,2025:320},Ya={2010:1.468,2011:1.422,2012:1.394,2013:1.374,2014:1.352,2015:1.35,2016:1.333,2017:1.306,2018:1.275,2019:1.252,2020:1.237,2021:1.181,2022:1.093,2023:1.054,2024:1.022,2025:1},Ee={base_year:Ta,cpi_data:wa,multipliers:Ya},lt={2011:336.25,2012:334.5,2013:333.5,2014:334.25,2015:341.25,2016:346.75,2017:350.75,2018:358.75,2019:380,2020:368.25,2021:361.5,2022:366.5,2023:369.75,2024:373},ct={5:17e3,8:3e3,12:5e3,16:5e3,28:2600,40:2600};function ka({dieAreaSvgRef:k,gpuData:b,gpuDieData:u,columnOrder:z,getTierFromModel:p,activeGenerations:x,setActiveGenerations:C,showAllDieGenerations:_,setShowAllDieGenerations:l}){const[P,ae]=Q.useState(!1),[X,se]=Q.useState(!1),[G,ve]=Q.useState(!1),[q,B]=Q.useState(!0),W=ee=>{ee==="cpi"?se(!X):ee==="wage"&&ve(!G)};return Q.useEffect(()=>{if(!b||!u||!k.current||!ct||!Ee||!lt){console.warn("DieAreaPlot: Missing required props, ref, or data files.");return}const ee=f(k.current);ee.selectAll("*").remove();const K={top:80,right:300,bottom:60,left:90},Pe=1100,$e=450,j=Pe-K.left-K.right,Ne=$e-K.top-K.bottom;ee.attr("width",Pe).attr("height",$e),ee.append("rect").attr("x",0).attr("y",0).attr("width",Pe).attr("height",$e).attr("rx",15).attr("ry",15).attr("fill","transparent").attr("class","chart-background").attr("filter","url(#glow)");const he=ee.append("defs"),Z=he.append("filter").attr("id","glow").attr("x","-20%").attr("y","-20%").attr("width","140%").attr("height","140%");Z.append("feGaussianBlur").attr("stdDeviation","3").attr("result","blur"),Z.append("feComposite").attr("in","SourceGraphic").attr("in2","blur").attr("operator","over");const Y=ee.append("g").attr("transform",`translate(${K.left},${K.top})`),T="die-area-tooltip-container";f("body").select(`.${T}`).size()?f(`.${T}`).style("visibility","hidden"):f("body").append("div").attr("class",T).style("position","absolute").style("visibility","hidden").style("background-color","rgba(25, 25, 30, 0.92)").style("color","#fff").style("border-radius","10px").style("padding","12px").style("pointer-events","none").style("box-shadow","0 4px 15px rgba(0, 0, 0, 0.5)").style("border","1px solid rgba(100, 108, 255, 0.4)").style("z-index","10").style("max-width","250px").style("font-size","12px").style("transition","opacity 0.2s ease-in-out").style("backdrop-filter","blur(5px)");const J=120,ue=25,Ge=10,oe=-60,le=j-J-10,Xe=le-J-Ge,Me=Xe-J-Ge,ke=Me-J-Ge;Y.append("rect").attr("x",ke).attr("y",oe).attr("width",J).attr("height",ue).attr("rx",5).attr("ry",5).attr("fill",q?"#4CAF50":"#444").attr("cursor","pointer").attr("class","wafer-toggle-btn").on("click",()=>B(!q)).on("mouseover",e=>{f(`.${T}`).style("visibility","visible").style("left",`${e.pageX}px`).style("top",`${e.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>Wafer Price Trend</strong></div>
                           <div style="padding: 5px;"><strong>Off:</strong> Hide wafer price trend area & axis.<br>
                           <strong>On:</strong> Show estimated wafer price per mmÂ² background area and dedicated Y-axis.<br>
                           <span style="font-size: 0.9em; color: #aaa;">Data represents rough third-party estimates for wafer prices. Adjustments (CPI/Wage) applied if active.</span></div>`)}).on("mouseout",()=>f(`.${T}`).style("visibility","hidden")),Y.append("text").attr("x",ke+J/2).attr("y",oe+ue/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(q?"Wafer On":"Wafer Off"),Y.append("rect").attr("x",Me).attr("y",oe).attr("width",J).attr("height",ue).attr("rx",5).attr("ry",5).attr("fill",X?"#646cff":"#444").attr("cursor","pointer").attr("class","cpi-toggle-btn").on("click",()=>W("cpi")).on("mouseover",e=>{f(`.${T}`).style("visibility","visible").style("left",`${e.pageX}px`).style("top",`${e.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>CPI Adjustment</strong></div>
                           <div style="padding: 5px;"><strong>Off:</strong> No CPI adjustment applied.<br>
                           <strong>On:</strong> Adjusts MSRP to constant ${Ee.base_year} dollars using US CPI data.<br>
                           <span style="font-size: 0.9em; color: #aaa;">Can be combined with Wage toggle.</span><br>Base year: ${Ee.base_year}</div>`)}).on("mouseout",()=>f(`.${T}`).style("visibility","hidden")),Y.append("text").attr("x",Me+J/2).attr("y",oe+ue/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(X?"CPI On":"CPI Off"),Y.append("rect").attr("x",Xe).attr("y",oe).attr("width",J).attr("height",ue).attr("rx",5).attr("ry",5).attr("fill",G?"#ff646c":"#444").attr("cursor","pointer").attr("class","wage-toggle-btn").on("click",()=>W("wage")).on("mouseover",e=>{f(`.${T}`).style("visibility","visible").style("left",`${e.pageX}px`).style("top",`${e.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>Wage Scaling</strong></div>
                           <div style="padding: 5px;"><strong>Off:</strong> No wage scaling.<br>
                           <strong>On, CPI Off:</strong> Scales MSRP by nominal wage change.<br>
                           <strong>On, CPI On:</strong> Scales MSRP by real wage change.<br>
                           <span style="font-size: 0.9em; color: #aaa;">Base year: 2024</span></div>`)}).on("mouseout",()=>f(`.${T}`).style("visibility","hidden")),Y.append("text").attr("x",Xe+J/2).attr("y",oe+ue/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(G?"Wage On":"Wage Off"),Y.append("rect").attr("x",le).attr("y",oe).attr("width",J).attr("height",ue).attr("rx",5).attr("ry",5).attr("fill",P?"#646cff":"#444").attr("cursor","pointer").attr("class","die-toggle-btn").on("click",()=>ae(!P)).on("mouseover",e=>{f(`.${T}`).style("visibility","visible").style("left",`${e.pageX}px`).style("top",`${e.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>Die Price Calculation</strong></div>
                           <div style="padding: 5px;"><strong>Full Die:</strong> Uses total die area.<br>
                           <strong>Disabled Die:</strong> Accounts for partially disabled dies (30% fixed + 70% linear scaling).</div>`)}).on("mouseout",()=>f(`.${T}`).style("visibility","hidden")),Y.append("text").attr("x",le+J/2).attr("y",oe+ue/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(P?"Disabled Die":"Full Die");const xe=e=>{const n=e.toString();let E=1,V="Nominal";const i=lt[2024],s=Ee.cpi_data[2024],v=lt[n],R=Ee.cpi_data[n],te=Ee.multipliers[n],Ce=i*(s/100),pe=v&&R?v*(R/100):null;return X&&G?v&&i&&v>0?(E=i/v,V="Real Wage (to 2024)"):V="Nominal (Wage Data Missing)":X&&!G?te&&(E=te,V=`CPI Adj. (to ${Ee.base_year})`):!X&&G&&(pe&&Ce&&pe>0?(E=Ce/pe,V="Nominal Wage (to 2024)"):V="Nominal (Wage Data Missing)"),{multiplier:E,type:V}},ce=b.filter(e=>{if(x&&x[e.series]===!1)return!1;const n=u[e.dieName];return e.msrp&&n&&n.dieSizeMM2&&e.releaseYear}).map(e=>{const n=u[e.dieName],E=n.fullCudaCores||0,V=e.cudaCores||0,i=E>0?V/E:1,s=n.dieSizeMM2*(.3+.7*i),{multiplier:v,type:R}=xe(e.releaseYear),te=e.msrp*v;return{...e,dieSizeMM2:n.dieSizeMM2,fullCudaCores:E,dieUtilizationRatio:i,effectiveDieSize:s,generation:n.generation||"Unknown",adjustmentMultiplier:v,adjustmentType:R,originalMsrp:e.msrp,adjustedMsrp:te,pricePerMM2:te/n.dieSizeMM2,effectivePricePerMM2:te/s,rawPricePerMM2:e.msrp/n.dieSizeMM2,rawEffectivePricePerMM2:e.msrp/s,displayPricePerMM2:P?te/s:te/n.dieSizeMM2,manufacturingNode:e.manufacturingNode}}),Te=Array.from(new Set(ce.map(e=>e.series))).map(e=>{const n=ce.filter(s=>s.series===e),E=n.length>0?Math.min(...n.map(s=>s.releaseYear)):0,V=n.sort((s,v)=>s.releaseYear-v.releaseYear)[0],i=V?V.manufacturingNode:null;return{series:e,releaseYear:E,manufacturingNode:i}}).sort((e,n)=>e.releaseYear-n.releaseYear),ie=Te.filter(e=>e.series!=="1600"&&e.series!=="2000"),Be=Te.some(e=>e.series==="1600"),t=Te.some(e=>e.series==="2000");if(Be||t){const e=Te.find(s=>s.series==="1600"),n=Te.find(s=>s.series==="2000"),E=n?n.releaseYear:e?e.releaseYear:2018,V=n?n.manufacturingNode:e?e.manufacturingNode:null;let i=ie.length;n?i=ie.findIndex(s=>s.releaseYear>n.releaseYear):e&&(i=ie.findIndex(s=>s.releaseYear>e.releaseYear)),i===-1&&(i=ie.length),ie.splice(i,0,{series:"1600/2000",releaseYear:E,manufacturingNode:V,isCombo:!0,series1:"1600",series2:"2000"})}const y=ie.length>0?ie.map(e=>e.series):["No Data"],g={},D={};ie.forEach(e=>{g[e.series]=e.releaseYear,D[e.series]=e.manufacturingNode});const c={};ce.forEach(e=>{e.series==="1600"||e.series==="2000"?c[e.series]="1600/2000":c[e.series]=e.series});const N=ft().domain(y).range([0,j]).padding(.5),re=Fe(ce,e=>e.displayPricePerMM2)||5,S=Math.ceil(re*1.1),A=_e().domain([0,S]).range([Ne,0]);let L=[],O=0;q&&ce.length>0&&(L=ie.map(e=>{const n=e.manufacturingNode,E=e.releaseYear,V=e.series;if(!n||!E||!ct[n]||!N(V))return null;const s=70686*({40:.85,28:.8,16:.75,12:.7,8:.65,5:.6}[n]||.7);if(s<=0)return null;const v=ct[n]/s,{multiplier:R,type:te}=xe(E),Ce=v*R;return{series:V,node:n,year:E,xPos:N(V),pricePerMM2:Ce,adjustmentType:te}}).filter(e=>e!==null&&isFinite(e.pricePerMM2)&&e.pricePerMM2>=0),O=Fe(L,e=>e.pricePerMM2)||0,L.sort((e,n)=>e.xPos-n.xPos));const ye=Math.ceil((O||1)/.1)*.1,be=_e().domain([0,ye]).range([Ne,0]),r=pt(N).tickFormat(""),M=Y.append("g").attr("class","x-axis").attr("transform",`translate(0,${Ne})`).call(r);M.selectAll(".tick").append("text").attr("y",15).attr("x",0).attr("text-anchor","middle").attr("fill","#ddd").style("font-size","12px").text(e=>e),M.selectAll(".tick").append("text").attr("y",30).attr("x",0).attr("text-anchor","middle").attr("fill","#aaa").style("font-size","10px").text(e=>g[e]),Y.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",j/2).attr("y",Ne+50).attr("fill","#ddd").style("font-size","12px").text("GPU Generation");const H=Ie(A).tickFormat(e=>`$${e}`);Y.append("g").attr("class","y-axis y-axis-left").call(H);let ne="GPU Price per Die Area ($/mmÂ²)";const{type:a}=xe("2024");if(a.includes("Real Wage")?ne="GPU Price/Area ($/mmÂ², Scaled by Real Wage vs 2024)":a.includes("CPI Adj.")?ne=`GPU Price/Area ($/mmÂ², ${Ee.base_year} USD)`:a.includes("Nominal Wage")&&(ne="GPU Price/Area ($/mmÂ², Scaled by Nominal Wage vs 2024)"),Y.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-55).attr("x",-310/2).attr("fill","#ddd").style("font-size","12px").text(ne),q&&L.length>0){const e=At(be).tickFormat(n=>`$${n.toFixed(2)}`).ticks(5);Y.append("g").attr("class","y-axis y-axis-right").attr("transform",`translate(${j}, 0)`).call(e).selectAll("text").attr("fill","#aaaaaa"),Y.append("text").attr("class","y-axis-label-right").attr("text-anchor","middle").attr("transform",`translate(${j+45}, ${Ne/2}) rotate(90)`).attr("fill","#aaaaaa").style("font-size","12px").text("Est. Wafer Price ($/mmÂ²)")}const o=Ie(A).tickSize(-710).tickFormat("");Y.append("g").attr("class","grid").call(o).selectAll("line").attr("stroke","#e0e0e0").attr("stroke-opacity",.15),Y.select(".grid .domain").remove();const m=Array.from(new Set(b.filter(e=>u[e.dieName]).map(e=>e.series))).map(e=>{const n=b.find(V=>V.series===e&&u[V.dieName]),E=n?u[n.dieName]:null;return{series:e,releaseYear:n?n.releaseYear:0,generation:E?E.generation:"Unknown"}}).sort((e,n)=>e.releaseYear-n.releaseYear),F=m.map(e=>e.series),w=tt(at).domain(F),h=Y.append("g").attr("class","die-area-legend").attr("transform",`translate(${j+70}, 0)`);h.append("text").attr("x",60).attr("y",-20).attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("text-anchor","middle").text("GPU Generation");const d=m.slice().sort((e,n)=>e.series==="1600"&&n.series==="2000"?-1:e.series==="2000"&&n.series==="1600"?1:e.releaseYear-n.releaseYear),we=h.selectAll(".legend-item").data(d).enter().append("g").attr("class","legend-item").attr("transform",(e,n)=>`translate(0, ${n*25})`),de=(e,n)=>{C&&l&&C(E=>{const V={...E,[n.series]:E[n.series]===!1},i=F.every(s=>V[s]!==!1);return l(i),V})};we.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("fill",e=>x[e.series]!==!1?w(e.series):"#555").attr("stroke","#ddd").attr("stroke-width",1).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",e=>x[e.series]!==!1?1:.5).on("click",de),we.append("text").attr("x",20).attr("y",12).text(e=>`${e.series} (${e.generation})`).style("font-size","12px").style("font-weight","bold").attr("fill",e=>x[e.series]!==!1?"#ddd":"#777").attr("cursor","pointer").on("click",de);const fe=h.append("g").attr("class","legend-item show-all").attr("transform",`translate(0, ${d.length*25+10})`),qe=()=>{if(C&&l){const e=!_,n={};F.forEach(E=>{n[E]=e}),C(n),l(e)}};if(fe.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",_?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",qe),fe.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show All Generations").attr("alignment-baseline","middle").attr("cursor","pointer").on("click",qe),h.append("text").attr("x",0).attr("y",d.length*25+50).attr("fill","#aaa").style("font-size","11px").text("* Colors represent GPU generations"),h.append("text").attr("x",0).attr("y",d.length*25+75).attr("fill","#aaa").style("font-size","11px").text("* Point sizes proportional"),h.append("text").attr("x",0).attr("y",d.length*25+90).attr("fill","#aaa").style("font-size","11px").attr("dx",8.5).text("to die area (mmÂ²)"),q&&L.length>0){const e=Ft().x(n=>n.xPos).y0(Ne).y1(n=>be(Math.min(n.pricePerMM2,ye))).curve(Xt);Y.append("path").datum(L).attr("class","wafer-price-area").attr("fill","#cccccc").attr("fill-opacity",.25).attr("stroke","none").attr("d",e),Y.append("g").attr("class","wafer-node-labels-top").selectAll(".wafer-node-label-top").data(L).enter().append("text").attr("class","wafer-node-label-top").attr("x",n=>n.xPos).attr("y",-10).attr("text-anchor","middle").attr("fill","#aaaaaa").attr("font-size","10px").attr("font-weight","bold").attr("opacity",.9).text(n=>`${n.node}nm`)}if(ce.length>0){const e={};y.forEach(i=>{if(i==="1600/2000"){const s=x[1600]!==!1,v=x[2e3]!==!1;s&&v?e[i]=ce.filter(R=>R.series==="1600"||R.series==="2000"):s?e[i]=ce.filter(R=>R.series==="1600"):v?e[i]=ce.filter(R=>R.series==="2000"):e[i]=[]}else i!=="No Data"&&(x[i]!==!1?e[i]=ce.filter(s=>c[s.series]===i):e[i]=[])});const n=Object.fromEntries(y.map(i=>[i,N(i)]));Object.entries(e).forEach(([i,s])=>{const v=n[i];if(!v&&v!==0||s.length===0)return;const R=s.map(te=>te.displayPricePerMM2).filter(te=>te!=null&&isFinite(te)&&te>=0&&te<=S);if(R.length>=2){const te=yt(R),Ce=Math.max(.1,(te||0)*1.5);if(!isFinite(Ce)||Ce<=0){console.warn(`Invalid bandwidth (${Ce}) for ${i}. Skipping violin.`);return}const pe=40,ge=bt(R),ze=Fe(R),Ae=Math.max(0,(ge||0)-Ce*2),me=Math.min(S,(ze||S)+Ce*2);let Ve=Dt(Ae,me,(me-Ae)/100);if(Ve.length<2){const $=et(R)||S/2;if(Ve=[...new Set([Math.max(0,$-1),$,Math.min(S,$+1)])].sort(vt),Ve.length<2){console.warn(`Could not generate sufficient yValues for KDE for ${i}. Skipping violin.`);return}}const mt=za(Ga(Ce),Ve)(R),Pt=(Fe(mt,$=>$[1]!=null&&isFinite($[1])?$[1]:0)||.001)*.01,He=mt.filter($=>$[0]!=null&&isFinite($[0])&&$[1]!=null&&isFinite($[1])&&$[1]>=Pt);if(He.length<2){console.warn(`Not enough valid density points (${He.length}) after KDE for ${i}. Skipping violin.`);return}const st=Fe(He,$=>$[1])||.001;if(st<=0){console.warn(`Max density is zero or negative (${st}) for ${i}. Skipping violin.`);return}const ut=_e().domain([0,st]).range([0,pe/2]),De=[];if(He.forEach($=>{De.push([v-ut($[1]),A($[0])])}),[...He].reverse().forEach($=>{De.push([v+ut($[1]),A($[0])])}),De.length>0&&De.push(De[0]),De.length<4){console.warn(`Generated violin path has too few points (${De.length}) for ${i}. Skipping violin.`);return}const Tt=rt().x($=>$[0]).y($=>$[1]).curve(Rt);let Re;if(i==="1600/2000"){const $=s.some(Se=>Se.series==="1600");s.some(Se=>Se.series==="2000")&&(!$||x[1600]===!1)?Re=w("2000"):Re=w("1600")}else Re=w(i)||"#ccc";const it=`violin-gradient-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`;let Ke=he.select(`#${it}`);if(Ke.empty()?(Ke=he.append("linearGradient").attr("id",it).attr("gradientTransform","rotate(90)"),Ke.append("stop").attr("offset","0%").attr("stop-color",Re).attr("stop-opacity",.9),Ke.append("stop").attr("offset","100%").attr("stop-color",Re).attr("stop-opacity",.4)):Ke.selectAll("stop").attr("stop-color",Re),Y.append("path").datum(De).attr("d",Tt).attr("fill",`url(#${it})`).attr("opacity",.8).attr("stroke",Re).attr("stroke-width",1).attr("stroke-opacity",.8).attr("class",`violin-shape violin-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`).on("mouseover",$=>{const I=et(R),Se=nt(R),Ye=yt(R),Ue=s.map(Le=>Le.effectivePricePerMM2).filter(Le=>Le!=null&&isFinite(Le)&&Le>=0&&Le<=S),gt=Ue.length>0?et(Ue):null,ht=Ue.length>0?nt(Ue):null,{generation:wt,node:Yt}=Aa(s,u);f(`.${T}`).style("visibility","visible").style("left",`${$.pageX+15}px`).style("top",`${$.pageY-10}px`).html(`<div class="tooltip-title" style="color: ${Re};">${i} Series</div>
                                       <div class="tooltip-info"><strong>${wt}</strong><br><strong>Node:</strong> ${Yt} nm<br>
                                       <div style="margin-top:5px; border-bottom:1px dotted #777; padding-bottom:3px;">
                                           <strong style="color:#a0e6ff;">Full Price/mmÂ²:</strong><br>Mean: $${I?I.toFixed(2):"N/A"}<br>Median: $${Se?Se.toFixed(2):"N/A"}<br>S.D.: $${Ye?Ye.toFixed(2):"N/A"}</div>
                                       <div style="margin-top:5px; border-bottom:1px dotted #777; padding-bottom:3px;">
                                           <strong style="color:#a0ffb0;">Cut Price/mmÂ²:</strong>
                                           ${gt!==null?`<br>Mean: $${gt.toFixed(2)}`:""}
                                           ${ht!==null?`<br>Median: $${ht.toFixed(2)}`:""}
                                           ${Ue.length>0?`<br>(${Ue.length} cut GPUs)`:"<br>No data"}</div>
                                       <div style="margin-top:5px;"><strong>Sample Size:</strong> ${R.length} GPUs</div></div>`)}).on("mouseout",()=>f(`.${T}`).style("visibility","hidden")),R.length>0){const $=[...R].sort(vt),I={min:bt($),q1:$.length>=3?Ct($,.25):void 0,median:nt($),q3:$.length>=3?Ct($,.75):void 0,max:Fe($)},Se=Y.append("g").attr("class",`violin-stats violin-stats-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`),Ye=pe/3;if(isFinite(I.median)&&Se.append("line").attr("x1",v-Ye/2).attr("x2",v+Ye/2).attr("y1",A(I.median)).attr("y2",A(I.median)).attr("stroke","#fff").attr("stroke-width",2).attr("opacity",.9).attr("class","violin-median"),isFinite(I.q1)&&isFinite(I.q3)&&I.q1<=I.q3){const Ue=Math.max(0,A(I.q1)-A(I.q3));Se.append("rect").attr("x",v-Ye/2).attr("y",A(I.q3)).attr("width",Ye).attr("height",Ue).attr("fill","#fff").attr("opacity",.4).attr("class","violin-iqr")}isFinite(I.min)&&isFinite(I.q1)&&I.min<I.q1&&(Se.append("line").attr("x1",v).attr("x2",v).attr("y1",A(I.min)).attr("y2",A(I.q1)).attr("stroke","#fff").attr("stroke-width",1).attr("class","violin-whisker"),Se.append("line").attr("x1",v-Ye/4).attr("x2",v+Ye/4).attr("y1",A(I.min)).attr("y2",A(I.min)).attr("stroke","#fff").attr("stroke-width",1).attr("opacity",.7).attr("class","violin-min-cap")),isFinite(I.max)&&isFinite(I.q3)&&I.max>I.q3&&(Se.append("line").attr("x1",v).attr("x2",v).attr("y1",A(I.q3)).attr("y2",A(I.max)).attr("stroke","#fff").attr("stroke-width",1).attr("class","violin-whisker"),Se.append("line").attr("x1",v-Ye/4).attr("x2",v+Ye/4).attr("y1",A(I.max)).attr("y2",A(I.max)).attr("stroke","#fff").attr("stroke-width",1).attr("opacity",.7).attr("class","violin-max-cap"))}}else s.length>0&&(console.log(`Not enough valid data points (${R.length}) for violin plot for ${i}.`),Y.append("text").attr("x",v).attr("y",Ne/2).attr("text-anchor","middle").attr("fill","#777").style("font-size","10px").text("Too few data points").attr("class",`violin-note violin-note-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`))});const E=Ut().domain([0,300,800]).range([1,4,11]).clamp(!0),V=[...ce].sort((i,s)=>s.dieSizeMM2-i.dieSizeMM2);Y.selectAll(".die-area-dot").data(V.filter(i=>x[i.series]!==!1),i=>i.model).join(i=>i.append("circle").attr("class",s=>`die-area-dot dot-${(c[s.series]||s.series).replace(/[^a-zA-Z0-9-_]/g,"-")}`).attr("cx",s=>N(c[s.series]||s.series)).attr("cy",s=>A(s.displayPricePerMM2)).attr("fill",s=>w(s.series)).attr("stroke","#fff").attr("stroke-width",.5).attr("r",0).call(s=>s.transition().duration(500).attr("r",v=>E(v.dieSizeMM2))),i=>i.attr("class",s=>`die-area-dot dot-${(c[s.series]||s.series).replace(/[^a-zA-Z0-9-_]/g,"-")}`).transition().duration(500).attr("cx",s=>N(c[s.series]||s.series)).attr("cy",s=>A(s.displayPricePerMM2)).attr("fill",s=>w(s.series)).attr("r",s=>E(s.dieSizeMM2)).attr("opacity",.85),i=>i.transition().duration(500).attr("r",0).attr("opacity",0).remove()).attr("opacity",.85).on("mouseover",function(i,s){f(`.${T}`).style("visibility","visible").style("left",`${i.pageX+15}px`).style("top",`${i.pageY-10}px`);let v="";s.adjustmentType!=="Nominal"&&(v=` <span style="color: #aaa;">($${(P?s.rawEffectivePricePerMM2:s.rawPricePerMM2).toFixed(2)} nominal)</span>`),f(`.${T}`).html(`<div class="tooltip-title" style="color: ${w(s.series)};">${s.model}</div>
                          <div class="tooltip-info">
                              <strong>Series:</strong> ${s.series} (${s.generation})<br>
                              <strong>MSRP:</strong> ${s.originalMsrp?`$${s.originalMsrp.toLocaleString()}`:"N/A"}
                              ${s.adjustmentType!=="Nominal"?`<br><strong>Adj. MSRP (${s.adjustmentType}):</strong> $${s.adjustedMsrp.toFixed(0)}`:""}<br>
                              <strong>Die Size:</strong> ${s.dieSizeMM2?`${s.dieSizeMM2.toLocaleString()} mmÂ²`:"N/A"}<br>
                              <strong>CUDA:</strong> ${s.cudaCores?s.cudaCores.toLocaleString():"N/A"} / ${s.fullCudaCores?s.fullCudaCores.toLocaleString():"N/A"} (${s.dieUtilizationRatio!=null?`${(s.dieUtilizationRatio*100).toFixed(1)}%`:"N/A"})<br>
                              <strong>${P?"Cut":"Full"} Price/mmÂ²:</strong> ${s.displayPricePerMM2!=null&&isFinite(s.displayPricePerMM2)?`$${s.displayPricePerMM2.toFixed(2)}`:"N/A"}${v}<br>
                              <span style="color: #ccc; font-size: 0.9em;">(${s.adjustmentType})</span><br>
                              <strong>Die:</strong> ${s.dieName||"N/A"} (${s.manufacturingNode||"N/A"}nm)<br>
                              <strong>Year:</strong> ${s.releaseYear||"N/A"}
                          </div>`),f(this).attr("stroke-width",2).attr("opacity",1)}).on("mouseout",function(i,s){f(`.${T}`).style("visibility","hidden"),f(this).attr("stroke-width",.5).attr("opacity",.85)})}else Y.append("text").attr("x",j/2).attr("y",Ne/2).attr("text-anchor","middle").attr("fill","#ddd").style("font-size","14px").text("No data to display based on current filters.");return()=>{const e=f(`.${T}`);e.size()&&e.remove()}},[b,u,k,x,P,X,G,q,C,l]),U.jsx("svg",{ref:k,style:{display:"block",margin:"20px auto"}})}function za(k,b){return function(u){return b.map(z=>[z,et(u,p=>k(z-p))])}}function Ga(k){return function(b){return Math.abs(b/=k)<=1?.75*(1-b*b)/k:0}}function Aa(k,b){let u="Unknown",z="Unknown";if(!k||k.length===0)return{generation:u,node:z};const p={},x={};k.forEach(l=>{const P=b[l.dieName];P&&P.generation&&(p[P.generation]=(p[P.generation]||0)+1),l.manufacturingNode&&(x[l.manufacturingNode]=(x[l.manufacturingNode]||0)+1)});let C=0;Object.entries(p).forEach(([l,P])=>{P>C&&(C=P,u=l)});let _=0;return Object.entries(x).forEach(([l,P])=>{P>_&&(_=P,z=l)}),{generation:u,node:z}}const dt=k=>{const b=k.toUpperCase(),u=b.match(/(\d{2,4})/);if(!u)return null;const z=u[1],p=parseInt(z.slice(-2),10);let x=null;return p>=90?x="90":p>=80?x="80":p>=70?x="70":p>=60?x="60":p>=50?x="50":p>=30&&(x="30"),x?b.includes(" TI")?`${x} Ti`:x:null},We=["90 Ti","90","80 Ti","80","70 Ti","70","60 Ti","60","50 Ti","50","30"];function Fa(){const[k,b]=Q.useState(!1),[u,z]=Q.useState(!1),p=Q.useRef(),[x,C]=Q.useState({}),[_,l]=Q.useState({}),[P,ae]=Q.useState(!0),X=Q.useRef(),[se,G]=Q.useState({"90 Ti":!0,90:!0,"80 Ti":!0,80:!0,"70 Ti":!1,70:!0,"60 Ti":!1,60:!0,"50 Ti":!1,50:!0,30:!1}),[ve,q]=Q.useState(!0),[B,W]=Q.useState(!0),[ee,K]=Q.useState({PlayStation:!0,Xbox:!0}),[Pe,$e]=Q.useState(100),j=Q.useRef(),[Ne,he]=Q.useState(!0);return Q.useEffect(()=>{if(Object.keys(_).length===0&&je&&je.length>0){const Z=Array.from(new Set(je.map(J=>J.series))),Y={};Z.forEach(J=>{Y[J]=!0}),l(Y);const T={};Z.forEach(J=>{je.filter(oe=>oe.series===J).some(oe=>oe.specialFlagship)&&(T[J]=!1)}),C(T)}if(Object.keys(se).length===0&&We&&We.length>0){const Z={};We.forEach(Y=>{Z[Y]=!0}),G(Z),q(!0)}if(Object.keys(ee).length===0&&Je&&Je.length>0){const Z=Array.from(new Set(Je.map(T=>T.platform))),Y={};Z.forEach(T=>{Y[T]=!0}),K(Y)}},[je,Je,We,_,se,ee]),U.jsxs("div",{className:"App",children:[U.jsx("h1",{style:{textAlign:"center",margin:"20px 0"},children:"NVIDIA GPU Analyzer"}),U.jsx("p",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 20px",color:"#ddd"},children:"Interactive visualization of NVIDIA GPU specifications, pricing trends, and market positioning across generations."}),U.jsx("p",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 20px",color:"#ddd"},children:"Each plot can have elements toggled on/off by click on the legend."}),U.jsx("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto 20px",color:"#ddd"},children:"This visualization tracks NVIDIA's CUDA core counts across GPU generations, tracking how lower-tier cards receive proportionally fewer cores over time compared to flagship models."}),U.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",margin:"10px auto"},children:[U.jsx("button",{onClick:()=>b(!k),style:{padding:"10px 20px",cursor:"pointer"},children:k?"Show Absolute Tiers":"Align Flagships (Normalize Start)"}),!k&&U.jsx("button",{onClick:()=>z(!u),style:{padding:"10px 20px",cursor:"pointer",backgroundColor:u?"#646cff":"#444"},children:u?"Linear Scale":"Log Scale"}),U.jsx("a",{href:"https://github.com/mr-september/nvidia-gpu-analyzer",target:"_blank",rel:"noopener noreferrer",title:"View on GitHub",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#242424",transition:"background-color 0.3s ease"},onMouseOver:Z=>Z.currentTarget.style.backgroundColor="#444",onMouseOut:Z=>Z.currentTarget.style.backgroundColor="#242424",children:U.jsx("svg",{height:"24",width:"24",viewBox:"0 0 16 16",fill:"#ffffff",children:U.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})})]}),U.jsx($a,{svgRef:p,gpuData:je,columnOrder:We,getTierFromModel:dt,toggleMode:k,useLogScale:u,specialFlagshipActive:x,setSpecialFlagshipActive:C,activeGenerations:_,setActiveGenerations:l,showAllCudaGenerations:P,setShowAllCudaGenerations:ae}),U.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"Special flagships are defined as those that launch 1-2 years after the original flagship. 780 Ti is an exception where it launched only 6 months after the 780. But hey, you have the power to decide which to use."}),U.jsxs("div",{className:"vram-chart-section",style:{marginTop:"80px",paddingTop:"20px",borderTop:"1px solid #444"},children:[U.jsx("h2",{style:{textAlign:"center",margin:"20px 0"},children:"VRAM Evolution Over Time"}),U.jsx("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto 20px",color:"#ddd"},children:"This chart shows how video memory capacity has evolved over time across different GPU classes and consoles."}),U.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:U.jsx(Pa,{vramSvgRef:X,gpuData:je,consoleData:Je,columnOrder:We,getTierFromModel:dt,selectedClasses:se,setSelectedClasses:G,showAllClasses:ve,setShowAllClasses:q,showConsoleData:B,setShowConsoleData:W,visibleConsolePlatforms:ee,setVisibleConsolePlatforms:K,memoryAllocationPercentage:Pe,setMemoryAllocationPercentage:$e})})]}),U.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"Console memory represents total system memory. Unified memory systems (PS4, Xbox One, and newer) dynamically allocate between CPU and GPU. The slider estimates VRAM based on this allocation percentage. Older consoles with dedicated VRAM are shown at their fixed amount regardless of slider position."}),U.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"The xx60 class is the only class (so far) that had a regression in VRAM capacity."}),U.jsxs("div",{className:"die-area-chart-section",style:{marginTop:"80px",paddingTop:"20px",borderTop:"1px solid #444"},children:[U.jsx("h2",{style:{textAlign:"center",margin:"20px 0"},children:"GPU Price per Die Area Over Time"}),U.jsx("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto 20px",color:"#ddd"},children:"This chart shows the evolution of price (launch MSRP in USD) per die area ($/mmÂ²) across GPU generations. Individual GPUs are plotted as scatter points and distributions as violin plots."}),U.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:U.jsx(ka,{dieAreaSvgRef:j,gpuData:je,gpuDieData:Sa,columnOrder:We,getTierFromModel:dt,activeGenerations:_,setActiveGenerations:l,showAllDieGenerations:Ne,setShowAllDieGenerations:he})})]}),U.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"Price per die area ($/mmÂ²) tracks manufacturing efficiency and pricing strategy across GPU generations. Lower values may indicate better cost efficiency and/or competitive pricing."})]})}Bt.createRoot(document.getElementById("root")).render(U.jsx(Q.StrictMode,{children:U.jsx(Fa,{})}));
