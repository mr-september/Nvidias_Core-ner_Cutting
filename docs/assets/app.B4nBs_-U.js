import{r as $t,a as Yt,s as u,p as ft,m as Fe,l as _e,b as zt,o as tt,c as at,d as pt,e as Be,f as xt,g as rt,h as Gt,i as Ft,j as At,k as Xt,n as yt,q as Ct,t as Dt,u as et,v as bt,w as Rt,x as nt,y as vt,z as Ut}from"./vendor.V2Js9SfJ.js";var ot={exports:{}},Ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nt;function jt(){if(Nt)return Ze;Nt=1;var P=$t(),C=Symbol.for("react.element"),x=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,g=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function v(B,p,$){var Z,k={},ye=null,O=null;$!==void 0&&(ye=""+$),p.key!==void 0&&(ye=""+p.key),p.ref!==void 0&&(O=p.ref);for(Z in p)T.call(p,Z)&&!y.hasOwnProperty(Z)&&(k[Z]=p[Z]);if(B&&B.defaultProps)for(Z in p=B.defaultProps,p)k[Z]===void 0&&(k[Z]=p[Z]);return{$$typeof:C,type:B,key:ye,ref:O,props:k,_owner:g.current}}return Ze.Fragment=x,Ze.jsx=v,Ze.jsxs=v,Ze}var Mt;function Et(){return Mt||(Mt=1,ot.exports=jt()),ot.exports}var F=Et(),_=$t(),Qe={},St;function Bt(){if(St)return Qe;St=1;var P=Yt();return Qe.createRoot=P.createRoot,Qe.hydrateRoot=P.hydrateRoot,Qe}var It=Bt();const je=JSON.parse('[{"series":"500","model":"GTX 590","cudaCores":1024,"vram":3,"releaseYear":2011,"flagship":false,"specialFlagship":true,"msrp":699,"dieName":"2x GF110","manufacturingNode":40},{"series":"500","model":"GTX 580","cudaCores":512,"vram":1.5,"releaseYear":2010,"flagship":true,"msrp":499,"dieName":"GF110","manufacturingNode":40},{"series":"500","model":"GTX 570","cudaCores":480,"vram":1.25,"releaseYear":2010,"flagship":false,"msrp":349,"dieName":"GF110","manufacturingNode":40},{"series":"500","model":"GTX 560 Ti","cudaCores":384,"vram":1,"releaseYear":2011,"flagship":false,"msrp":249,"dieName":"GF114","manufacturingNode":40},{"series":"500","model":"GTX 560","cudaCores":336,"vram":1,"releaseYear":2011,"flagship":false,"msrp":199,"dieName":"GF114","manufacturingNode":40},{"series":"500","model":"GTX 550 Ti","cudaCores":192,"vram":1,"releaseYear":2011,"flagship":false,"msrp":149,"dieName":"GF116","manufacturingNode":40},{"series":"600","model":"GTX 690","cudaCores":3072,"vram":4,"releaseYear":2012,"flagship":false,"specialFlagship":true,"msrp":1000,"dieName":"2x GK104","manufacturingNode":28},{"series":"600","model":"GTX 680","cudaCores":1536,"vram":2,"releaseYear":2012,"flagship":true,"msrp":500,"dieName":"GK104","manufacturingNode":28},{"series":"600","model":"GTX 670","cudaCores":1344,"vram":2,"releaseYear":2012,"flagship":false,"msrp":400,"dieName":"GK104","manufacturingNode":28},{"series":"600","model":"GTX 660 Ti","cudaCores":1344,"vram":2,"releaseYear":2012,"flagship":false,"msrp":300,"dieName":"GK104","manufacturingNode":28},{"series":"600","model":"GTX 660","cudaCores":960,"vram":2,"releaseYear":2012,"flagship":false,"msrp":230,"dieName":"GK106","manufacturingNode":28},{"series":"600","model":"GTX 650 Ti","cudaCores":768,"vram":1,"releaseYear":2012,"flagship":false,"msrp":150,"dieName":"GK106","manufacturingNode":28},{"series":"600","model":"GTX 650","cudaCores":384,"vram":1,"releaseYear":2012,"flagship":false,"msrp":110,"dieName":"GK107","manufacturingNode":28},{"series":"700","model":"GTX 780 Ti","cudaCores":2880,"vram":3,"releaseYear":2013,"flagship":false,"specialFlagship":true,"msrp":699,"dieName":"GK110","manufacturingNode":28},{"series":"700","model":"GTX 780","cudaCores":2304,"vram":3,"releaseYear":2013,"flagship":true,"msrp":649,"dieName":"GK110","manufacturingNode":28},{"series":"700","model":"GTX 770","cudaCores":1536,"vram":2,"releaseYear":2013,"flagship":false,"msrp":399,"dieName":"GK104","manufacturingNode":28},{"series":"700","model":"GTX 760","cudaCores":1152,"vram":2,"releaseYear":2013,"flagship":false,"msrp":249,"dieName":"GK104","manufacturingNode":28},{"series":"700","model":"GTX 750 Ti","cudaCores":640,"vram":2,"releaseYear":2014,"flagship":false,"msrp":149,"dieName":"GM107","manufacturingNode":28},{"series":"700","model":"GTX 750","cudaCores":512,"vram":1,"releaseYear":2014,"flagship":false,"msrp":119,"dieName":"GM107","manufacturingNode":28},{"series":"900","model":"GTX 980 Ti","cudaCores":2816,"vram":6,"releaseYear":2015,"flagship":false,"specialFlagship":true,"msrp":649,"dieName":"GM200","manufacturingNode":28},{"series":"900","model":"GTX 980","cudaCores":2048,"vram":4,"releaseYear":2014,"flagship":true,"msrp":549,"dieName":"GM204","manufacturingNode":28},{"series":"900","model":"GTX 970","cudaCores":1664,"vram":4,"releaseYear":2014,"flagship":false,"msrp":329,"dieName":"GM204","manufacturingNode":28},{"series":"900","model":"GTX 960","cudaCores":1024,"vram":2,"releaseYear":2015,"flagship":false,"msrp":199,"dieName":"GM206","manufacturingNode":28},{"series":"900","model":"GTX 950","cudaCores":768,"vram":2,"releaseYear":2015,"flagship":false,"msrp":159,"dieName":"GM206","manufacturingNode":28},{"series":"500","model":"GT 530","cudaCores":96,"vram":2,"releaseYear":2011,"flagship":false,"specialFlagship":false,"msrp":null,"dieName":"GF108","manufacturingNode":40},{"series":"600","model":"GT 630","cudaCores":96,"vram":2,"releaseYear":2012,"flagship":false,"specialFlagship":false,"msrp":60,"dieName":"GF108","manufacturingNode":40},{"series":"700","model":"GT 730","cudaCores":384,"vram":2,"releaseYear":2014,"flagship":false,"specialFlagship":false,"msrp":70,"dieName":"GK208","manufacturingNode":28},{"series":"1000","model":"GT 1030","cudaCores":384,"vram":2,"releaseYear":2017,"flagship":false,"specialFlagship":false,"msrp":70,"dieName":"GP108","manufacturingNode":14},{"series":"1600","model":"GTX 1630","cudaCores":512,"vram":4,"releaseYear":2022,"flagship":false,"specialFlagship":false,"msrp":150,"dieName":"TU117","manufacturingNode":12},{"series":"1000","model":"GTX 1080 Ti","cudaCores":3584,"vram":11,"releaseYear":2017,"flagship":false,"specialFlagship":true,"msrp":699,"dieName":"GP102","manufacturingNode":16},{"series":"1600","model":"GTX 1650","cudaCores":896,"vram":4,"releaseYear":2019,"flagship":false,"msrp":149,"dieName":"TU117","manufacturingNode":12},{"series":"1600","model":"GTX 1660","cudaCores":1408,"vram":6,"releaseYear":2019,"flagship":false,"msrp":219,"dieName":"TU116","manufacturingNode":12},{"series":"1600","model":"GTX 1660 Ti","cudaCores":1536,"vram":6,"releaseYear":2019,"flagship":false,"specialFlagship":false,"msrp":279,"dieName":"TU116","manufacturingNode":12},{"series":"1000","model":"GTX 1080","cudaCores":2560,"vram":8,"releaseYear":2016,"flagship":true,"msrp":599,"dieName":"GP104","manufacturingNode":16},{"series":"1000","model":"GTX 1070 Ti","cudaCores":2432,"vram":8,"releaseYear":2017,"flagship":false,"msrp":449,"dieName":"GP104","manufacturingNode":16},{"series":"1000","model":"GTX 1070","cudaCores":1920,"vram":8,"releaseYear":2016,"flagship":false,"msrp":379,"dieName":"GP104","manufacturingNode":16},{"series":"1000","model":"GTX 1060","cudaCores":1280,"vram":6,"releaseYear":2016,"flagship":false,"msrp":299,"dieName":"GP106","manufacturingNode":16},{"series":"1000","model":"GTX 1050 Ti","cudaCores":768,"vram":4,"releaseYear":2016,"flagship":false,"msrp":139,"dieName":"GP107","manufacturingNode":14},{"series":"1000","model":"GTX 1050","cudaCores":640,"vram":2,"releaseYear":2016,"flagship":false,"msrp":109,"dieName":"GP107","manufacturingNode":14},{"series":"2000","model":"RTX 2080 Ti","cudaCores":4352,"vram":11,"releaseYear":2018,"flagship":true,"msrp":999,"dieName":"TU102","manufacturingNode":12},{"series":"2000","model":"RTX 2080","cudaCores":2944,"vram":8,"releaseYear":2018,"flagship":false,"msrp":699,"dieName":"TU104","manufacturingNode":12},{"series":"2000","model":"RTX 2070","cudaCores":2304,"vram":8,"releaseYear":2018,"flagship":false,"msrp":499,"dieName":"TU106","manufacturingNode":12},{"series":"2000","model":"RTX 2060 Super","cudaCores":2176,"vram":8,"releaseYear":2019,"flagship":false,"msrp":399,"dieName":"TU106","manufacturingNode":12},{"series":"3000","model":"RTX 3090 TI","cudaCores":10752,"vram":24,"releaseYear":2022,"flagship":false,"specialFlagship":true,"msrp":1999,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3090","cudaCores":10496,"vram":24,"releaseYear":2020,"flagship":true,"msrp":1499,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3080 Ti","cudaCores":10240,"vram":12,"releaseYear":2021,"flagship":false,"msrp":1199,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3080","cudaCores":8704,"vram":10,"releaseYear":2020,"flagship":false,"msrp":699,"dieName":"GA102","manufacturingNode":8},{"series":"3000","model":"RTX 3070 Ti","cudaCores":6144,"vram":8,"releaseYear":2021,"flagship":false,"msrp":599,"dieName":"GA104","manufacturingNode":8},{"series":"3000","model":"RTX 3070","cudaCores":5888,"vram":8,"releaseYear":2020,"flagship":false,"msrp":499,"dieName":"GA104","manufacturingNode":8},{"series":"3000","model":"RTX 3060 Ti","cudaCores":4864,"vram":8,"releaseYear":2020,"flagship":false,"msrp":399,"dieName":"GA104","manufacturingNode":8},{"series":"3000","model":"RTX 3060","cudaCores":3584,"vram":12,"releaseYear":2021,"flagship":false,"msrp":329,"dieName":"GA106","manufacturingNode":8},{"series":"3000","model":"RTX 3050","cudaCores":2560,"vram":8,"releaseYear":2022,"flagship":false,"msrp":249,"dieName":"GA106","manufacturingNode":8},{"series":"4000","model":"RTX 4090","cudaCores":16384,"vram":24,"releaseYear":2022,"flagship":true,"msrp":1599,"dieName":"AD102","manufacturingNode":5},{"series":"4000","model":"RTX 4080","cudaCores":9728,"vram":16,"releaseYear":2022,"flagship":false,"msrp":1199,"dieName":"AD103","manufacturingNode":5},{"series":"4000","model":"RTX 4070 Ti","cudaCores":7680,"vram":12,"releaseYear":2023,"flagship":false,"msrp":799,"dieName":"AD104","manufacturingNode":5},{"series":"4000","model":"RTX 4070","cudaCores":5888,"vram":12,"releaseYear":2023,"flagship":false,"msrp":599,"dieName":"AD104","manufacturingNode":5},{"series":"4000","model":"RTX 4060 Ti","cudaCores":4352,"vram":16,"releaseYear":2023,"flagship":false,"msrp":499,"dieName":"AD106","manufacturingNode":5},{"series":"4000","model":"RTX 4060","cudaCores":3072,"vram":8,"releaseYear":2023,"flagship":false,"msrp":299,"dieName":"AD107","manufacturingNode":5},{"series":"5000","model":"RTX 5090","cudaCores":21760,"vram":32,"releaseYear":2025,"flagship":true,"specialFlagship":false,"msrp":1999,"dieName":"GB202","manufacturingNode":5},{"series":"5000","model":"RTX 5080","cudaCores":10752,"vram":16,"releaseYear":2025,"flagship":false,"msrp":999,"dieName":"GB203","manufacturingNode":5},{"series":"5000","model":"RTX 5070 Ti","cudaCores":8960,"vram":16,"releaseYear":2025,"flagship":false,"msrp":799,"dieName":"GB203","manufacturingNode":5},{"series":"5000","model":"RTX 5070","cudaCores":6144,"vram":12,"releaseYear":2025,"flagship":false,"msrp":549,"dieName":"GB205","manufacturingNode":5},{"series":"5000","model":"RTX 5060 Ti","cudaCores":4608,"vram":16,"releaseYear":2025,"flagship":false,"msrp":429,"dieName":"GB207","manufacturingNode":5},{"series":"5000","model":"RTX 5060","cudaCores":3840,"vram":8,"releaseYear":2025,"flagship":false,"msrp":299,"dieName":"GB207","manufacturingNode":5}]'),Je=[{platform:"PlayStation",name:"PlayStation",launchYear:1994,launchPriceUSD:299,memory:"1/1024",storage:"Memory Card",nodeNM:null},{platform:"PlayStation",name:"PlayStation 2",launchYear:2e3,launchPriceUSD:299,memory:"4/1024",storage:"Memory Card / Optional HDD",nodeNM:250},{platform:"PlayStation",name:"PlayStation 3",launchYear:2006,launchPriceUSD:599,memory:"256/1024",storage:"60GB HDD",nodeNM:90},{platform:"PlayStation",name:"PlayStation 4",launchYear:2013,launchPriceUSD:399,memory:"8",storage:"500GB HDD",nodeNM:28},{platform:"PlayStation",name:"PlayStation 4 Pro",launchYear:2016,launchPriceUSD:399,memory:"8",storage:"1TB HDD",nodeNM:16},{platform:"PlayStation",name:"PlayStation 5",launchYear:2020,launchPriceUSD:499,memory:"16",storage:"825GB SSD",nodeNM:7},{platform:"PlayStation",name:"PlayStation 5 Pro",launchYear:2024,launchPriceUSD:699,memory:"16",storage:"2TB SSD",nodeNM:7},{platform:"Xbox",name:"Xbox",launchYear:2001,launchPriceUSD:299,memory:"64/1024",storage:"8GB HDD",nodeNM:180},{platform:"Xbox",name:"Xbox 360",launchYear:2005,launchPriceUSD:399,memory:"512/1024",storage:"20GB HDD",nodeNM:90},{platform:"Xbox",name:"Xbox One",launchYear:2013,launchPriceUSD:499,memory:"8",storage:"500GB HDD",nodeNM:28},{platform:"Xbox",name:"Xbox One X",launchYear:2017,launchPriceUSD:499,memory:"12",storage:"1TB HDD",nodeNM:16},{platform:"Xbox",name:"Xbox Series X",launchYear:2020,launchPriceUSD:499,memory:"16",storage:"1TB SSD",nodeNM:7}],Wt={fullCudaCores:512,dieSizeMM2:520,generation:"Fermi"},_t={fullCudaCores:384,dieSizeMM2:332,generation:"Fermi"},Lt={fullCudaCores:192,dieSizeMM2:238,generation:"Fermi"},Vt={fullCudaCores:96,dieSizeMM2:116,generation:"Fermi"},qt={fullCudaCores:1536,dieSizeMM2:294,generation:"Kepler"},Ot={fullCudaCores:960,dieSizeMM2:214,generation:"Kepler"},Ht={fullCudaCores:384,dieSizeMM2:118,generation:"Kepler"},Kt={fullCudaCores:2880,dieSizeMM2:561,generation:"Kepler"},Zt={fullCudaCores:640,dieSizeMM2:148,generation:"Maxwell"},Jt={fullCudaCores:3072,dieSizeMM2:601,generation:"Maxwell"},Qt={fullCudaCores:2048,dieSizeMM2:398,generation:"Maxwell"},ea={fullCudaCores:1024,dieSizeMM2:228,generation:"Maxwell"},ta={fullCudaCores:384,dieSizeMM2:74,generation:"Pascal"},aa={fullCudaCores:3840,dieSizeMM2:471,generation:"Pascal"},ra={fullCudaCores:2560,dieSizeMM2:314,generation:"Pascal"},sa={fullCudaCores:1280,dieSizeMM2:200,generation:"Pascal"},ia={fullCudaCores:768,dieSizeMM2:132,generation:"Pascal"},na={fullCudaCores:1024,dieSizeMM2:200,generation:"Turing"},oa={fullCudaCores:1536,dieSizeMM2:284,generation:"Turing"},la={fullCudaCores:4608,dieSizeMM2:754,generation:"Turing"},ca={fullCudaCores:3072,dieSizeMM2:545,generation:"Turing"},da={fullCudaCores:2304,dieSizeMM2:445,generation:"Turing"},fa={fullCudaCores:10752,dieSizeMM2:628.4,generation:"Ampere"},pa={fullCudaCores:6144,dieSizeMM2:392.5,generation:"Ampere"},ma={fullCudaCores:3840,dieSizeMM2:276,generation:"Ampere"},ua={fullCudaCores:18432,dieSizeMM2:609,generation:"Ada Lovelace"},ga={fullCudaCores:10240,dieSizeMM2:379,generation:"Ada Lovelace"},ha={fullCudaCores:7680,dieSizeMM2:294,generation:"Ada Lovelace"},xa={fullCudaCores:4608,dieSizeMM2:188,generation:"Ada Lovelace"},ya={fullCudaCores:3072,dieSizeMM2:159,generation:"Ada Lovelace"},Ca={fullCudaCores:21760,dieSizeMM2:750,generation:"Blackwell"},ba={fullCudaCores:10752,dieSizeMM2:378,generation:"Blackwell"},va={fullCudaCores:8960,dieSizeMM2:263,generation:"Blackwell"},Na={fullCudaCores:6144,dieSizeMM2:181,generation:"Blackwell"},Ma={fullCudaCores:4608,dieSizeMM2:143,generation:"Blackwell"},Sa={GF110:Wt,GF114:_t,GF116:Lt,GF108:Vt,GK104:qt,GK106:Ot,GK107:Ht,GK110:Kt,GM107:Zt,GM200:Jt,GM204:Qt,GM206:ea,GP108:ta,GP102:aa,GP104:ra,GP106:sa,GP107:ia,TU117:na,TU116:oa,TU102:la,TU104:ca,TU106:da,GA102:fa,GA104:pa,GA106:ma,AD102:ua,AD103:ga,AD104:ha,AD106:xa,AD107:ya,GB202:Ca,GB203:ba,GB205:va,GB206:Na,GB207:Ma};function $a({svgRef:P,gpuData:C,columnOrder:x,getTierFromModel:T,toggleMode:g,useLogScale:y,specialFlagshipActive:v,setSpecialFlagshipActive:B,activeGenerations:p,setActiveGenerations:$,showAllCudaGenerations:Z,setShowAllCudaGenerations:k,tooltipData:ye,tooltipPosition:O,setTooltipData:Ae,setTooltipPosition:ge,handleColumnHover:ee,handleColumnLeave:Ce}){return _.useEffect(()=>{if(!C||!x||!T||!P.current){console.warn("CudaPlot: Missing required props or ref.");return}const H=u(P.current);H.selectAll("*").remove();const Y={top:60,right:250,bottom:50,left:90},oe=900-Y.left-Y.right,te=450-Y.top-Y.bottom;H.attr("width",oe+Y.left+Y.right).attr("height",te+Y.top+Y.bottom),H.append("rect").attr("x",Y.left-10).attr("y",Y.top-10).attr("width",oe+20).attr("height",te+20).attr("rx",15).attr("ry",15).attr("fill","transparent").attr("class","chart-background");const z=H.append("g").attr("transform",`translate(${Y.left},${Y.top})`);u("body").select(".tooltip-container").size()?u(".tooltip-container").style("visibility","hidden"):u("body").append("div").attr("class","tooltip-container").style("position","absolute").style("visibility","hidden");const A=ft().domain(x).range([0,oe]).padding(.5),we=Fe(C,a=>a.cudaCores||0),ze=Math.ceil(we/1e3)*1e3,U=(a=>{if(!a||a<=0)return 1e3;const h=Math.floor(Math.log10(a))+1,m=Math.pow(10,h-1);return Math.ceil(a/m)*m})(we);let j;g?j=_e().domain([0,110]).range([te,0]):y?j=zt().domain([100,U]).range([te,0]):j=_e().domain([0,ze]).range([te,0]);const he=Array.from(new Set(C.map(a=>a.series))).map(a=>{const h=C.filter(M=>M.series===a),m=h.length>0?Math.min(...h.map(M=>M.releaseYear)):0;return{series:a,releaseYear:m,seriesNum:parseInt(a,10)||0}}).sort((a,h)=>a.releaseYear!==h.releaseYear?a.releaseYear-h.releaseYear:a.seriesNum-h.seriesNum).map(a=>a.series),E=tt(at).domain(he),V=pt(A).tickFormat(a=>a==="90 Ti"&&g?"Flagship":`xx${a}`);z.append("g").attr("class","x-axis").attr("transform",`translate(0,${te})`).call(V).selectAll("text").style("text-anchor","middle").attr("dy","1em"),z.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",oe/2).attr("y",te+40).attr("fill","#ddd").style("font-size","12px").text("GPU Class");let se;g?se=Be(j).tickFormat(a=>`${a}%`):y?se=Be(j).tickFormat(a=>xt(",")(a)):se=Be(j).tickFormat(a=>xt(",")(a)),z.append("g").attr("class","y-axis").call(se),z.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",g?-45:-55).attr("x",-340/2).attr("fill","#ddd").style("font-size","12px").text(g?"Percentage of Flagship CUDA Cores":y?"Number of CUDA Cores (Log Scale)":"Number of CUDA Cores");const be=Be(j).tickSize(-560).tickFormat("");z.append("g").attr("class","grid").call(be).selectAll("line").attr("stroke","#e0e0e0").attr("stroke-opacity",.7),z.select(".grid .domain").remove();const ke={};x.forEach(a=>{ke[a]=[]});const pe=C.filter(a=>a.series==="2000"),J=pe.find(a=>a.flagship),Se=pe.find(a=>a.specialFlagship),xe=v[2e3]&&Se,$e=xe?Se:J;v[2e3]!==v[1600]&&B(a=>({...a,1600:v[2e3]})),he.forEach(a=>{if(p[a]===!1)return;const h=C.filter(e=>e.series===a);let m=h.find(e=>e.flagship),M=h.find(e=>e.specialFlagship),N=v[a]&&M,I;if(a==="1600"&&$e?$e.cudaCores==null||$e.cudaCores<=0?(console.warn(`2000 series flagship (${$e.model}) has invalid CUDA cores. Cannot normalize 1600 series.`),I=h.find(e=>e.flagship)):I=$e:I=N?M:m,!I||I.cudaCores==null||I.cudaCores<=0){const e=[...h].sort((l,d)=>(d.cudaCores||0)-(l.cudaCores||0))[0];if(!e||e.cudaCores==null||e.cudaCores<=0){console.warn(`No valid flagship (or fallback) found for series ${a}. Skipping.`);return}I=e,console.warn(`No explicit flagship for series ${a}. Using ${I.model} as fallback.`)}const me=I.cudaCores,w=T(I.model);if(x.indexOf(w)===-1){console.warn(`Flagship tier "${w}" for series ${a} not found in columnOrder. Skipping series.`);return}const ne=h.map(e=>{const l=T(e.model),d=x.indexOf(l),f=e.cudaCores!=null&&me>0?e.cudaCores/me*100:null;return{...e,normalizedCores:f,tier:l,columnIndex:d}}).filter(e=>{const l=N&&e.specialFlagship||!N&&e.flagship,d=g&&a==="1600"&&e.series==="2000"&&(e.flagship||e.specialFlagship)&&p[1600]!==!1&&p[2e3]!==!1,f=!e.flagship&&!e.specialFlagship,o=a!=="1600"&&l,re=e.cudaCores!=null&&e.cudaCores>0,Q=e.columnIndex!==-1,q=!g||e.normalizedCores!==null;return(f||o||d)&&re&&q&&Q}).sort((e,l)=>e.columnIndex-l.columnIndex),L=ne,r=ne.filter(e=>e.cudaCores!=null&&(g?e.normalizedCores!==null:e.cudaCores>0)),c=rt().defined(e=>e.normalizedCores!==null).x(e=>{const l=N&&e.specialFlagship||!N&&e.flagship,d=g&&a==="1600"&&e.series==="2000"&&(e.flagship||e.specialFlagship),f=a==="1600"&&e.series==="1600";if(!g||!l&&!d||f){const o=A(x[e.columnIndex]);return o!==void 0?o:null}else{const o=x.indexOf("90 Ti");if(o!==-1&&(a!=="1600"&&l||d))return A(x[o]);const re=A(x[e.columnIndex]);return re!==void 0?re:null}}).y(e=>{const l=g?e.normalizedCores:e.cudaCores;if(!g&&y&&(l==null||l<=0)||g&&l==null)return null;const d=j(l);return d!==void 0?d:null});z.append("path").datum(L).attr("class","series-line").attr("fill","none").attr("stroke",E(a)).attr("stroke-width",2).attr("d",c),z.selectAll(`.dot-${a.replace(/\s+/g,"-")}`).data(r).enter().append("circle").attr("class",`series-dot dot-${a.replace(/\s+/g,"-")}`).attr("cx",e=>{const l=N&&e.specialFlagship||!N&&e.flagship,d=a==="1600"&&e.series==="1600";if(!g||!l||d)return A(x[e.columnIndex]);{const f=x.indexOf("90 Ti");return A(f!==-1?x[f]:x[e.columnIndex])}}).attr("cy",e=>j(g?e.normalizedCores:e.cudaCores)).attr("r",4).attr("fill",E(a)).append("title").text(e=>{if(g){const l=C.filter(o=>o.series===e.series);let d="";if(e.series==="1600"&&$e)d=$e.model;else{const o=l.find(q=>q.flagship),re=l.find(q=>q.specialFlagship);d=v[e.series]&&re?re.model:o?o.model:"Unknown flagship"}const f=e.normalizedCores!=null?`${e.normalizedCores.toFixed(1)}%`:"N/A";return`${e.model} (${e.series})
Cores: ${e.cudaCores.toLocaleString()}
Vs ${d}: ${f}`}else return`${e.model} (${e.series})
Cores: ${e.cudaCores.toLocaleString()}`}),ne.forEach(e=>{e.tier&&ke[e.tier]&&e.cudaCores!=null&&(g?e.normalizedCores!==null:e.cudaCores>0)&&ke[e.tier].push(e)})});const Xe=C.find(a=>a.model==="GTX 1660 Ti"&&a.series==="1600"),Ie=xe?Se:J;if(g&&Xe&&Ie&&p[1600]!==!1&&p[2e3]!==!1){const a=Ie;if(a&&a.cudaCores>0&&Xe.cudaCores!=null&&Xe.cudaCores>0){const h=Xe.cudaCores/a.cudaCores*100,m=T(Xe.model),M=T(a.model);if(m&&M){const N=A(m),I=j(h),me=A("90 Ti"),w=j(100);if(N!==void 0&&I!==void 0&&me!==void 0&&w!==void 0){z.append("path").attr("stroke",E("1600")).attr("stroke-width",1.5).attr("stroke-dasharray","5,5").attr("fill","none").attr("d",rt()([[N,I],[me,w]]));const ce=(N+me)/2,ne=(I+w)/2;z.append("text").attr("x",ce).attr("y",ne-10).attr("text-anchor","middle").attr("font-size","10px").attr("fill","rgba(200, 200, 200, 0.9)")}}}}const le=z.append("g").attr("class","legend").attr("transform",`translate(${oe+20}, 0)`);le.append("text").attr("x",60).attr("y",-20).attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("text-anchor","middle").text("GPU Generation");const Pe=he.map(a=>{const h=C.filter(N=>N.series===a),m=h.find(N=>N.flagship),M=h.find(N=>N.specialFlagship);return{series:a,regularFlagship:m,specialFlagship:M,activeFlagship:v[a]&&M?M:m}}),ie=le.selectAll(".legend-item").data(Pe).enter().append("g").attr("class","legend-item").attr("transform",(a,h)=>`translate(0, ${h*35})`);ie.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("fill",a=>p[a.series]?E(a.series):"#555").attr("stroke","#ddd").attr("stroke-width",1).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",a=>p[a.series]?1:.5).on("click",function(a,h){$&&k&&$(m=>{const M={...m,[h.series]:!m[h.series]},N=he.every(I=>M[I]===!0);return k(N),M})}),ie.append("text").attr("x",20).attr("y",12).text(a=>a.series).style("font-size","12px").attr("alignment-baseline","middle").style("font-weight","bold").attr("fill",a=>p[a.series]?"#ddd":"#777").attr("cursor","pointer").on("click",function(a,h){$&&k&&$(m=>{const M={...m,[h.series]:!m[h.series]},N=he.every(I=>M[I]===!0);return k(N),M})}),ie.append("text").attr("x",20).attr("y",27).text(a=>{if(g&&a.series==="1600"){const m=C.filter(N=>N.series==="2000"),M=v[2e3]&&m.find(N=>N.specialFlagship)?m.find(N=>N.specialFlagship):m.find(N=>N.flagship);return M?`Reference: ${M.model}`:"No reference"}const h=v[a.series]&&a.specialFlagship?a.specialFlagship:a.regularFlagship;return h?`Flagship: ${h.model}`:"No flagship"}).style("font-size","10px").attr("alignment-baseline","middle").attr("fill",a=>p[a.series]?"#aaa":"#666").attr("class","flagship-text"),ie.filter(a=>a.specialFlagship).append("rect").attr("x",125).attr("y",17).attr("width",60).attr("height",18).attr("rx",5).attr("ry",5).attr("fill",a=>v[a.series]?"#646cff":"#444").attr("cursor","pointer").attr("class","toggle-btn").on("click",function(a,h){B&&B(m=>({...m,[h.series]:!m[h.series]}))}),ie.filter(a=>a.specialFlagship).append("text").attr("x",155).attr("y",28).text(a=>v[a.series]?"Special":"Regular").style("font-size","10px").style("text-anchor","middle").style("fill","#fff").attr("pointer-events","none").attr("class","toggle-text");const ae=le.append("g").attr("class","legend-item").attr("transform",`translate(0, ${Pe.length*35+10})`);return ae.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",Z?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",function(){if($&&k){const a=!Z,h={};he.forEach(m=>{h[m]=a}),$(h),k(a)}}),ae.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show All Generations").attr("alignment-baseline","middle"),x.forEach(a=>{A(a)!==void 0&&(oe/x.length,z.append("rect").attr("class","column-overlay").attr("x",A(a)-A.step()/2+A.padding()*A.step()/2).attr("y",0).attr("width",A.step()).attr("height",te).style("pointer-events","all").style("fill","none").on("mousemove",function(m){var me;u(".tooltip-container").style("visibility","visible").style("left",`${m.pageX+15}px`).style("top",`${m.pageY-10}px`);let M="",N=[];a==="90 Ti"&&g?(M='<div class="tooltip-title">Aligned Flagships</div>',N=he.map(w=>{if(p[w]===!1)return null;const ce=C.filter(e=>e.series===w),ne=v[w];let L;ne&&(L=ce.find(e=>e.specialFlagship)),L||(L=ce.find(e=>e.flagship));const r=C.filter(e=>e.series==="2000"),c=v[2e3]&&r.find(e=>e.specialFlagship)?r.find(e=>e.specialFlagship):r.find(e=>e.flagship);if(L&&L.cudaCores!=null&&L.cudaCores>0){const e=w==="1600"&&c&&c.cudaCores>0?c:L;if(e.cudaCores!=null&&e.cudaCores>0)return{...L,normalizedCores:L.cudaCores/e.cudaCores*100,series:w}}return null}).filter(Boolean).sort((w,ce)=>{const ne=parseInt(w.series,10)||0,L=parseInt(ce.series,10)||0;return ne-L})):(M=`<div class="tooltip-title">xx${a} Class</div>`,N=((me=ke[a])==null?void 0:me.filter(w=>p[w.series]!==!1).sort((w,ce)=>{const ne=parseInt(w.series,10)||0,L=parseInt(ce.series,10)||0;return ne-L}))||[]);let I=M;N&&N.length>0?N.forEach(w=>{let ce="";if(g){const ne=C.filter(l=>l.series===w.series);let L="";const r=C.filter(l=>l.series==="2000"),c=v[2e3]&&r.find(l=>l.specialFlagship)?r.find(l=>l.specialFlagship):r.find(l=>l.flagship);if(w.series==="1600"&&c)L=c.model;else{const l=ne.find(o=>o.flagship),d=ne.find(o=>o.specialFlagship);L=v[w.series]&&d?d.model:l?l.model:"Unknown flagship"}const e=w.normalizedCores!=null?`${w.normalizedCores.toFixed(1)}%`:"N/A";ce=`Vs ${L}: ${e}`}I+=`
                                 <div class="gpu-item">
                                     <span class="model-name">
                                         <span class="color-indicator" style="background-color: ${E(w.series)};"></span>
                                         ${w.model}
                                     </span>
                                     <div class="cores-info">
                                         Cores: ${w.cudaCores?w.cudaCores.toLocaleString():"N/A"}<br>
                                         ${g?ce:""}
                                     </div>
                                 </div>
                             `}):I+="<div>No active GPUs in this class</div>",u(".tooltip-container").html(I)}).on("mouseout",function(){u(".tooltip-container").style("visibility","hidden")}))}),()=>{u(".tooltip-container").remove()}},[P,C,x,T,g,y,v,B,p,$,Z,k]),F.jsx("svg",{ref:P,style:{display:"block",margin:"20px auto"}})}function Pa({vramSvgRef:P,gpuData:C,consoleData:x,columnOrder:T,getTierFromModel:g,selectedClasses:y,setSelectedClasses:v,showAllGenerations:B,setShowAllGenerations:p,showConsoleData:$,setShowConsoleData:Z,visibleConsolePlatforms:k,setVisibleConsolePlatforms:ye,memoryAllocationPercentage:O,setMemoryAllocationPercentage:Ae}){return _.useEffect(()=>{if(!C||!x||!T||!g||!P.current){console.warn("VramPlot: Missing required props or ref.");return}u("body").select(".vram-tooltip-container").size()||u("body").append("div").attr("class","vram-tooltip-container").style("position","absolute").style("visibility","hidden").style("background-color","rgba(30, 30, 30, 0.9)").style("color","#fff").style("border-radius","8px").style("padding","10px").style("pointer-events","none").style("box-shadow","0 2px 10px rgba(0, 0, 0, 0.3)").style("z-index","10").style("max-width","200px").style("font-size","12px"),u("body").select(".console-tooltip-container").size()||u("body").append("div").attr("class","console-tooltip-container").style("position","absolute").style("visibility","hidden").style("background-color","rgba(30, 30, 30, 0.9)").style("color","#fff").style("border-radius","8px").style("padding","10px").style("pointer-events","none").style("box-shadow","0 2px 10px rgba(0, 0, 0, 0.3)").style("z-index","10").style("max-width","220px").style("font-size","12px");const ge=u(P.current);ge.selectAll("*").remove();const ee={top:60,right:350,bottom:50,left:90},Ce=1e3-ee.left-ee.right,H=450-ee.top-ee.bottom;ge.attr("width",Ce+ee.left+ee.right).attr("height",H+ee.top+ee.bottom),ge.append("rect").attr("x",ee.left-10).attr("y",ee.top-10).attr("width",Ce+20).attr("height",H+20).attr("rx",15).attr("ry",15).attr("fill","transparent").attr("class","chart-background");const Y=ge.append("g").attr("transform",`translate(${ee.left},${ee.top})`),oe=C.filter(r=>{const c=g(r.model);return c&&(y[c]||B)}),te=oe.length>0,z=x.filter(r=>r.launchYear>=2005&&k[r.platform]),A=te?Array.from(new Set(oe.map(r=>r.releaseYear))).sort((r,c)=>r-c):Array.from(new Set(C.map(r=>r.releaseYear))).sort((r,c)=>r-c),we=z.map(r=>r.launchYear),ze=[...new Set([...A,...we])].sort((r,c)=>r-c),R=ze.length>0?ze:[2e3,2025],U=ft().domain(R).range([0,Ce]).padding(.5);z.forEach(r=>{if(r.memory&&typeof r.memory=="string"&&r.memory.includes("/")){const[c,e]=r.memory.split("/").map(Number);r.memoryGB=c/e,r.memoryDisplay=`${c} MB`}else r.memory!=null?(r.memoryGB=Number(r.memory),r.memoryDisplay=`${r.memory} GB`):(r.memoryGB=0,r.memoryDisplay="N/A")});const j=te?Fe(oe,r=>r.vram):0,Ne=Fe(z,r=>r.memoryGB)||0,he=Math.max(j,Ne),E=Math.ceil(he/5)*5||25,V=_e().domain([0,E]).range([H,0]),se=pt(U).tickFormat(r=>r);Y.append("g").attr("class","x-axis").attr("transform",`translate(0,${H})`).call(se).selectAll("text").style("text-anchor","middle").attr("dy","1em"),Y.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",Ce/2).attr("y",H+40).attr("fill","#ddd").style("font-size","12px").text("Release Year");const be=Be(V).tickFormat(r=>`${r} GB`);Y.append("g").attr("class","y-axis").call(be),Y.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-55).attr("x",-340/2).attr("fill","#ddd").style("font-size","12px").text("VRAM (GB)");const ke=Be(V).tickSize(-560).tickFormat("");if(Y.append("g").attr("class","grid").call(ke).selectAll("line").attr("stroke","#e0e0e0").attr("stroke-opacity",.7),Y.select(".grid .domain").remove(),!te&&z.length===0&&Y.append("text").attr("x",Ce/2).attr("y",H/2).attr("text-anchor","middle").attr("fill","#ddd").style("font-size","14px").text("No data to display based on current filters."),$&&z.length>0){const r={PlayStation:{base:"rgba(0, 112, 209, 0.15)",variant:"rgba(0, 180, 209, 0.15)"},Xbox:{base:"rgba(16, 124, 16, 0.15)",variant:"rgba(16, 190, 120, 0.15)"}},c=Y.append("g").attr("class","console-layer"),e={};z.forEach(d=>{e[d.launchYear]||(e[d.launchYear]=[]),e[d.launchYear].push(d)}),Object.values(e).forEach(d=>{d.sort((f,o)=>f.platform.localeCompare(o.platform))});const l=Object.keys(e).map(Number).sort((d,f)=>d-f);l.forEach(d=>{const f=U(d);if(f!==void 0){const o=e[d].map(q=>q.name.includes("PS1")||q.name.includes("PS2")||q.name.includes("PS3")?q.memoryGB:q.memoryGB*(O/100)),re=Math.max(...o),Q=V(re);c.append("line").attr("x1",f).attr("y1",0).attr("x2",f).attr("y2",Q).attr("stroke","#e0e0e0").attr("stroke-opacity",.5).attr("stroke-width",.5).attr("class","console-year-gridline")}}),l.forEach(d=>{const f=e[d];f.forEach((o,re)=>{var K,ve;const Q=U(o.launchYear);if(Q===void 0)return;const q=V(o.memoryGB),qe=o.name.includes("PS1")||o.name.includes("PS2")||o.name.includes("PS3");let t=q;if(!qe){const ue=(V(0)-q)*(O/100);t=V(0)-ue}const n=l.indexOf(d),X=l[n+1];let W=Ce;if(X){const de=U(X);de!==void 0&&(W=de)}const i=Math.max(W-Q,0),s=f.length>1&&re>0,b=s?(K=r[o.platform])==null?void 0:K.variant:(ve=r[o.platform])==null?void 0:ve.base,G=s?15+re*12:15;if(e[d].tooltipData||(e[d].tooltipData=[]),e[d].tooltipData.find(de=>de.name===o.name)||e[d].tooltipData.push(o),Q!==void 0&&i>0&&b){c.append("rect").attr("x",Q).attr("y",0).attr("width",i).attr("height",t).attr("fill",b).attr("stroke","none").attr("class","console-rect").attr("data-year",d).on("mouseover",function(ue){u(".console-tooltip-container").style("visibility","visible").style("left",`${ue.pageX+15}px`).style("top",`${ue.pageY-10}px`);const Ye=e[d];let Ge="";Ye&&Ye.tooltipData&&(Ye.tooltipData.sort((fe,Oe)=>fe.platform.localeCompare(Oe.platform)||fe.name.localeCompare(Oe.name)),Ye.tooltipData.forEach((fe,Oe)=>{const Le=fe.nodeNM?`${fe.nodeNM}nm`:"N/A";Ge+=`
                                            ${Oe>0?'<hr style="border-top: 1px solid rgba(255,255,255,0.2); margin: 8px 0;">':""}
                                            <div class="tooltip-title">${fe.name}</div>
                                            <div class="tooltip-info">
                                                <strong>Year:</strong> ${fe.launchYear}<br>
                                                <strong>Launch Price:</strong> $${fe.launchPriceUSD}<br>
                                                <strong>Memory:</strong> ${fe.memoryDisplay}<br>
                                                <strong>Manufacturing Node:</strong> ${Le}
                                            </div>
                                        `})),u(".console-tooltip-container").html(Ge),u(this).attr("fill",s?o.platform==="PlayStation"?"rgba(0, 180, 209, 0.3)":"rgba(16, 190, 120, 0.3)":o.platform==="PlayStation"?"rgba(0, 112, 209, 0.3)":"rgba(16, 124, 16, 0.3)")}).on("mouseout",function(){u(".console-tooltip-container").style("visibility","hidden"),u(this).attr("fill",b)});const de=o.name.includes("360")||o.name.includes("4 Pro")||o.name.includes("One X")||o.name.includes("PS5")||o.name.includes("Series X")||o.name.includes("Series S");if(i>40||de){let ue;if(o.platform==="PlayStation"){const Ge=o.name.match(/(\d+)/);Ge?(ue="PS"+Ge[1],o.name.includes("Pro")?ue+=" Pro":o.name.includes("Slim")&&(ue+=" Slim")):ue="PS"}else ue=o.name.replace(o.platform+" ",""),de&&i<=40&&o.name.includes("360")?ue="360":de&&i<=40&&o.name.includes("One X")?ue="One X":de&&i<=40&&o.name.includes("Series S")&&(ue="Series S");const Ye=Math.min(Q+5,Q+i-25);if(o.name.includes("4 Pro")&&z.some(fe=>fe&&fe.name&&fe.name.includes("One X")&&k.Xbox)){c.append("text").attr("x",Ye).attr("y",G).attr("fill","#4a90e2").style("font-size","10px").style("font-weight","bold").text("PS4"),c.append("text").attr("x",Ye).attr("y",G+12).attr("fill","#4a90e2").style("font-size","10px").style("font-weight","bold").text("Pro");return}c.append("text").attr("x",Ye).attr("y",G).attr("fill",o.platform==="PlayStation"?"#4a90e2":"#4caf50").style("font-size","10px").style("font-weight","bold").text(ue)}}})})}if(te){const r=tt(at).domain(T),c={};T.forEach(e=>{const l=oe.filter(d=>g(d.model)===e);(y[e]||B)&&l.length>0&&(c[e]=l.sort((d,f)=>d.releaseYear-f.releaseYear))}),Object.entries(c).forEach(([e,l])=>{const d=rt().defined(f=>f.vram!=null&&f.vram>0&&U(f.releaseYear)!==void 0&&V(f.vram)!==void 0).x(f=>U(f.releaseYear)).y(f=>V(f.vram));Y.append("path").datum(l).attr("class","series-line").attr("fill","none").attr("stroke",r(e)).attr("stroke-width",1.5).attr("stroke-dasharray","3,3").attr("d",d),Y.selectAll(`.vram-dot-${e.replace(/\s+/g,"-")}`).data(l.filter(f=>f.vram!=null&&f.vram>0)).enter().append("circle").attr("class",`vram-dot vram-dot-${e.replace(/\s+/g,"-")}`).attr("cx",f=>U(f.releaseYear)).attr("cy",f=>V(f.vram)).attr("r",4).attr("fill",r(e)).attr("stroke","#fff").attr("stroke-width",.5).on("mouseover",function(f,o){u(".vram-tooltip-container").style("visibility","visible").style("left",`${f.pageX+15}px`).style("top",`${f.pageY-10}px`);const re=`
                            <div class="tooltip-title" style="color: ${r(g(o.model))};">${o.model}</div>
                            <div class="tooltip-info">
                                <strong>Series:</strong> ${o.series} series<br>
                                <strong>VRAM:</strong> ${o.vram} GB<br>
                                <strong>Year:</strong> ${o.releaseYear}<br>
                                <strong>CUDA Cores:</strong> ${o.cudaCores?o.cudaCores.toLocaleString():"N/A"}
                            </div>
                        `;u(".vram-tooltip-container").html(re),u(this).attr("r",6).attr("stroke-width",2)}).on("mouseout",function(){u(".vram-tooltip-container").style("visibility","hidden"),u(this).attr("r",4).attr("stroke-width",.5)})})}const pe=Y.append("g").attr("class","vram-legend").attr("transform",`translate(${Ce+20}, 0)`);pe.append("text").attr("x",40).attr("y",-20).attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("text-anchor","middle").text("GPU Classes");const J=tt(at).domain(T),Se=pe.selectAll(".legend-item").data(T).enter().append("g").attr("class","legend-item").attr("transform",(r,c)=>`translate(0, ${c*25})`);Se.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",r=>y[r]?J(r):"#555").attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",r=>y[r]?1:.5).attr("class","class-checkbox").on("click",function(r,c){v&&p&&v(e=>{const l={...e,[c]:!e[c]};return e[c]&&B&&p(!1),T.every(f=>l[f]===!0)&&p(!0),l})}),Se.append("text").attr("x",25).attr("y",12).attr("fill",r=>y[r]?"#ddd":"#777").style("font-size","12px").text(r=>`xx${r}`).attr("cursor","pointer").attr("alignment-baseline","middle").on("click",function(r,c){v&&p&&v(e=>{const l={...e,[c]:!e[c]};return e[c]&&B&&p(!1),T.every(f=>l[f]===!0)&&p(!0),l})});const xe=pe.append("g").attr("class","legend-item").attr("transform",`translate(0, ${T.length*25+10})`);xe.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",B?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",function(){if(v&&p)if(B){const r={};T.forEach(c=>{r[c]=!1}),v(r),p(!1)}else{const r={};T.forEach(c=>{r[c]=!0}),v(r),p(!0)}}),xe.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show All Classes").attr("alignment-baseline","middle");const $e=pe.append("g").attr("class","legend-item").attr("transform",`translate(0, ${T.length*25+40})`);if($e.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",$?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",function(){Z&&Z(r=>!r)}),$e.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show Console Data").attr("alignment-baseline","middle"),$){const r=pe.append("g").attr("class","platform-legend").attr("transform",`translate(25, ${T.length*25+70})`);r.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("fill",k.PlayStation?"rgba(0, 112, 209, 0.5)":"#555").attr("stroke","#ddd").attr("stroke-width",.5).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",k.PlayStation?1:.5),r.append("text").attr("x",25).attr("y",12).attr("fill",k.PlayStation?"#ddd":"#777").style("font-size","12px").style("cursor","pointer").text("PlayStation"),r.append("rect").attr("x",0).attr("y",0).attr("width",100).attr("height",15).attr("fill","transparent").attr("cursor","pointer").on("click",function(){if(ye){const c=!k.PlayStation;ye(e=>({...e,PlayStation:c}))}}),r.append("rect").attr("x",0).attr("y",25).attr("width",15).attr("height",15).attr("fill",k.Xbox?"rgba(16, 124, 16, 0.5)":"#555").attr("stroke","#ddd").attr("stroke-width",.5).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",k.Xbox?1:.5),r.append("text").attr("x",25).attr("y",37).attr("fill",k.Xbox?"#ddd":"#777").style("font-size","12px").style("cursor","pointer").text("Xbox"),r.append("rect").attr("x",0).attr("y",25).attr("width",100).attr("height",15).attr("fill","transparent").attr("cursor","pointer").on("click",function(){if(ye){const c=!k.Xbox;ye(e=>({...e,Xbox:c}))}})}pe.append("text").attr("x",80).attr("y",-20).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("transform","translate(75, 0)").text("Unified Memory");const le=pe.append("g").attr("class","memory-control-group").attr("transform","translate(120, 0)").append("g").attr("class","memory-slider-group"),Pe=50,ie=215,ae=14,a=35-ae/2;le.append("text").attr("x",35).attr("y",15).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#aaa").text("% dedicated to VRAM");const h=le.append("text").attr("x",35).attr("y",35).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill","#646cff").text(`${O}%`),m=_e().domain([0,100]).range([ie,0]).clamp(!0);le.append("rect").attr("x",a).attr("y",Pe).attr("width",ae).attr("height",ie).attr("rx",4).attr("fill","rgba(60, 60, 60, 0.3)").attr("stroke","#666").attr("stroke-width",1),[0,25,50,75,100].forEach(r=>{const c=m(r)+Pe;le.append("line").attr("x1",a-3).attr("y1",c).attr("x2",a+ae+3).attr("y2",c).attr("stroke",r===50?"#aaa":"#777").attr("stroke-width",r===50?1.5:1),le.append("text").attr("class","tick-label-text").attr("x",a+ae+15).attr("y",c+4).attr("text-anchor","start").style("font-size","10px").attr("fill",r===O?"#646cff":"#aaa").attr("font-weight",r===O?"bold":"normal").text(`${r}%`)});const M=m(O)+Pe,N=le.append("rect").attr("x",a-4).attr("y",M-7).attr("width",ae+8).attr("height",14).attr("rx",7).attr("fill","rgba(100, 108, 255, 0.2)").attr("filter","blur(2px)"),I=le.append("rect").attr("x",a-3).attr("y",M-6).attr("width",ae+6).attr("height",12).attr("rx",6).attr("fill","#646cff").attr("stroke","#ddd").attr("stroke-width",.5).attr("cursor","pointer").attr("class","slider-handle"),me=4,w=(r,c)=>{const e=r+(c==="up"?-3.5:3.5),l=r+(c==="up"?-4-1.5:me+1.5);return isNaN(e)||isNaN(l)?"":`M ${a+ae/2-me/2} ${e}
                    L ${a+ae/2+me/2} ${e}
                    L ${a+ae/2} ${l}Z`},ce=le.append("path").attr("class","slider-arrow top-arrow").attr("d",w(M,"up")).attr("fill","#fff"),ne=le.append("path").attr("class","slider-arrow bottom-arrow").attr("d",w(M,"down")).attr("fill","#fff"),L=Gt().on("start",function(){u(this).attr("fill","#535bf2")}).on("start drag",function(r){if(!this.initialDragData){const q=parseFloat(u(this).attr("y"))+6;this.initialDragData={handlePosition:q,eventY:r.sourceEvent.clientY}}const c=r.sourceEvent.clientY-this.initialDragData.eventY,e=this.initialDragData.handlePosition+c,l=Math.max(Pe,Math.min(Pe+ie,e));I.attr("y",l-6),N.attr("y",l-7),ce.attr("d",w(l,"up")),ne.attr("d",w(l,"down"));const o=1-(l-Pe)/ie,re=Math.round(o*100),Q=Math.max(0,Math.min(100,re));h.text(`${Q}%`),le.selectAll(".tick-label-text").attr("fill",q=>q===Q?"#646cff":"#aaa").attr("font-weight",q=>q===Q?"bold":"normal"),Q!==O&&Ae&&Ae(Q)}).on("end",function(){u(this).attr("fill","#646cff")});return I.call(L),pe.append("text").attr("x",0).attr("y",T.length*25+($?290:240)).attr("fill","#aaa").style("font-size","11px").text("* Colors represent GPU classes"),()=>{u(".vram-tooltip-container").remove(),u(".console-tooltip-container").remove()}},[P,C,x,T,g,y,v,B,p,$,Z,k,ye,O,Ae]),F.jsx("svg",{ref:P,style:{display:"block",margin:"20px auto"}})}const Ta=2025,wa={2010:218.056,2011:224.939,2012:229.594,2013:232.957,2014:236.736,2015:237.017,2016:240.007,2017:245.12,2018:251.107,2019:255.657,2020:258.811,2021:270.97,2022:292.656,2023:303.682,2024:313.2,2025:320},ka={2010:1.468,2011:1.422,2012:1.394,2013:1.374,2014:1.352,2015:1.35,2016:1.333,2017:1.306,2018:1.275,2019:1.252,2020:1.237,2021:1.181,2022:1.093,2023:1.054,2024:1.022,2025:1},Ee={base_year:Ta,cpi_data:wa,multipliers:ka},lt={2011:336.25,2012:334.5,2013:333.5,2014:334.25,2015:341.25,2016:346.75,2017:350.75,2018:358.75,2019:380,2020:368.25,2021:361.5,2022:366.5,2023:369.75,2024:373},ct={5:17e3,8:3e3,12:5e3,16:5e3,28:2600,40:2600};function Ya({dieAreaSvgRef:P,gpuData:C,gpuDieData:x,columnOrder:T,getTierFromModel:g,activeGenerations:y,setActiveGenerations:v,showAllDieGenerations:B,setShowAllDieGenerations:p}){const[$,Z]=_.useState(!1),[k,ye]=_.useState(!1),[O,Ae]=_.useState(!1),[ge,ee]=_.useState(!0),Ce=H=>{H==="cpi"?ye(!k):H==="wage"&&Ae(!O)};return _.useEffect(()=>{if(!C||!x||!P.current||!ct||!Ee||!lt){console.warn("DieAreaPlot: Missing required props, ref, or data files.");return}const H=u(P.current);H.selectAll("*").remove();const Y={top:80,right:300,bottom:60,left:90},oe=1100,te=450,z=oe-Y.left-Y.right,A=te-Y.top-Y.bottom;H.attr("width",oe).attr("height",te),H.append("rect").attr("x",0).attr("y",0).attr("width",oe).attr("height",te).attr("rx",15).attr("ry",15).attr("fill","transparent").attr("class","chart-background").attr("filter","url(#glow)");const we=H.append("defs"),ze=we.append("filter").attr("id","glow").attr("x","-20%").attr("y","-20%").attr("width","140%").attr("height","140%");ze.append("feGaussianBlur").attr("stdDeviation","3").attr("result","blur"),ze.append("feComposite").attr("in","SourceGraphic").attr("in2","blur").attr("operator","over");const R=H.append("g").attr("transform",`translate(${Y.left},${Y.top})`),U="die-area-tooltip-container";u("body").select(`.${U}`).size()?u(`.${U}`).style("visibility","hidden"):u("body").append("div").attr("class",U).style("position","absolute").style("visibility","hidden").style("background-color","rgba(25, 25, 30, 0.92)").style("color","#fff").style("border-radius","10px").style("padding","12px").style("pointer-events","none").style("box-shadow","0 4px 15px rgba(0, 0, 0, 0.5)").style("border","1px solid rgba(100, 108, 255, 0.4)").style("z-index","10").style("max-width","250px").style("font-size","12px").style("transition","opacity 0.2s ease-in-out").style("backdrop-filter","blur(5px)");const j=120,Ne=25,he=10,E=-60,V=z-j-10,se=V-j-he,be=se-j-he,ke=be-j-he;R.append("rect").attr("x",ke).attr("y",E).attr("width",j).attr("height",Ne).attr("rx",5).attr("ry",5).attr("fill",ge?"#4CAF50":"#444").attr("cursor","pointer").attr("class","wafer-toggle-btn").on("click",()=>ee(!ge)).on("mouseover",t=>{u(`.${U}`).style("visibility","visible").style("left",`${t.pageX}px`).style("top",`${t.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>Wafer Price Trend</strong></div>
                           <div style="padding: 5px;"><strong>Off:</strong> Hide wafer price trend area & axis.<br>
                           <strong>On:</strong> Show estimated wafer price per mm² background area and dedicated Y-axis.<br>
                           <span style="font-size: 0.9em; color: #aaa;">Data represents rough third-party estimates for wafer prices. Adjustments (CPI/Wage) applied if active.</span></div>`)}).on("mouseout",()=>u(`.${U}`).style("visibility","hidden")),R.append("text").attr("x",ke+j/2).attr("y",E+Ne/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(ge?"Wafer On":"Wafer Off"),R.append("rect").attr("x",be).attr("y",E).attr("width",j).attr("height",Ne).attr("rx",5).attr("ry",5).attr("fill",k?"#646cff":"#444").attr("cursor","pointer").attr("class","cpi-toggle-btn").on("click",()=>Ce("cpi")).on("mouseover",t=>{u(`.${U}`).style("visibility","visible").style("left",`${t.pageX}px`).style("top",`${t.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>CPI Adjustment</strong></div>
                           <div style="padding: 5px;"><strong>Off:</strong> No CPI adjustment applied.<br>
                           <strong>On:</strong> Adjusts MSRP to constant ${Ee.base_year} dollars using US CPI data.<br>
                           <span style="font-size: 0.9em; color: #aaa;">Can be combined with Wage toggle.</span><br>Base year: ${Ee.base_year}</div>`)}).on("mouseout",()=>u(`.${U}`).style("visibility","hidden")),R.append("text").attr("x",be+j/2).attr("y",E+Ne/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(k?"CPI On":"CPI Off"),R.append("rect").attr("x",se).attr("y",E).attr("width",j).attr("height",Ne).attr("rx",5).attr("ry",5).attr("fill",O?"#ff646c":"#444").attr("cursor","pointer").attr("class","wage-toggle-btn").on("click",()=>Ce("wage")).on("mouseover",t=>{u(`.${U}`).style("visibility","visible").style("left",`${t.pageX}px`).style("top",`${t.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>Wage Scaling</strong></div>
                           <div style="padding: 5px;"><strong>Off:</strong> No wage scaling.<br>
                           <strong>On, CPI Off:</strong> Scales MSRP by nominal wage change.<br>
                           <strong>On, CPI On:</strong> Scales MSRP by real wage change.<br>
                           <span style="font-size: 0.9em; color: #aaa;">Base year: 2024</span></div>`)}).on("mouseout",()=>u(`.${U}`).style("visibility","hidden")),R.append("text").attr("x",se+j/2).attr("y",E+Ne/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text(O?"Wage On":"Wage Off"),R.append("rect").attr("x",V).attr("y",E).attr("width",j).attr("height",Ne).attr("rx",5).attr("ry",5).attr("fill",$?"#646cff":"#444").attr("cursor","pointer").attr("class","die-toggle-btn").on("click",()=>Z(!$)).on("mouseover",t=>{u(`.${U}`).style("visibility","visible").style("left",`${t.pageX}px`).style("top",`${t.pageY-40}px`).html(`<div style="text-align: center; padding: 5px;"><strong>Die Price Calculation</strong></div>
                           <div style="padding: 5px;"><strong>Full Die:</strong> Uses total die area.<br>
                           <strong>Disabled Die:</strong> Accounts for partially disabled dies (30% fixed + 70% linear scaling).</div>`)}).on("mouseout",()=>u(`.${U}`).style("visibility","hidden")),R.append("text").attr("x",V+j/2).attr("y",E+Ne/2+4).attr("text-anchor","middle").attr("fill","#fff").style("font-size","12px").style("pointer-events","none").text($?"Disabled Die":"Full Die");const pe=t=>{const n=t.toString();let X=1,W="Nominal";const i=lt[2024],s=Ee.cpi_data[2024],b=lt[n],G=Ee.cpi_data[n],K=Ee.multipliers[n],ve=i*(s/100),de=b&&G?b*(G/100):null;return k&&O?b&&i&&b>0?(X=i/b,W="Real Wage (to 2024)"):W="Nominal (Wage Data Missing)":k&&!O?K&&(X=K,W=`CPI Adj. (to ${Ee.base_year})`):!k&&O&&(de&&ve&&de>0?(X=ve/de,W="Nominal Wage (to 2024)"):W="Nominal (Wage Data Missing)"),{multiplier:X,type:W}},J=C.filter(t=>{if(y&&y[t.series]===!1)return!1;const n=x[t.dieName];return t.msrp&&n&&n.dieSizeMM2&&t.releaseYear}).map(t=>{const n=x[t.dieName],X=n.fullCudaCores||0,W=t.cudaCores||0,i=X>0?W/X:1,s=n.dieSizeMM2*(.3+.7*i),{multiplier:b,type:G}=pe(t.releaseYear),K=t.msrp*b;return{...t,dieSizeMM2:n.dieSizeMM2,fullCudaCores:X,dieUtilizationRatio:i,effectiveDieSize:s,generation:n.generation||"Unknown",adjustmentMultiplier:b,adjustmentType:G,originalMsrp:t.msrp,adjustedMsrp:K,pricePerMM2:K/n.dieSizeMM2,effectivePricePerMM2:K/s,rawPricePerMM2:t.msrp/n.dieSizeMM2,rawEffectivePricePerMM2:t.msrp/s,displayPricePerMM2:$?K/s:K/n.dieSizeMM2,manufacturingNode:t.manufacturingNode}}),Se=Array.from(new Set(J.map(t=>t.series))).map(t=>{const n=J.filter(s=>s.series===t),X=n.length>0?Math.min(...n.map(s=>s.releaseYear)):0,W=n.sort((s,b)=>s.releaseYear-b.releaseYear)[0],i=W?W.manufacturingNode:null;return{series:t,releaseYear:X,manufacturingNode:i}}).sort((t,n)=>t.releaseYear-n.releaseYear),xe=Se.filter(t=>t.series!=="1600"&&t.series!=="2000"),$e=Se.some(t=>t.series==="1600"),Xe=Se.some(t=>t.series==="2000");if($e||Xe){const t=Se.find(s=>s.series==="1600"),n=Se.find(s=>s.series==="2000"),X=n?n.releaseYear:t?t.releaseYear:2018,W=n?n.manufacturingNode:t?t.manufacturingNode:null;let i=xe.length;n?i=xe.findIndex(s=>s.releaseYear>n.releaseYear):t&&(i=xe.findIndex(s=>s.releaseYear>t.releaseYear)),i===-1&&(i=xe.length),xe.splice(i,0,{series:"1600/2000",releaseYear:X,manufacturingNode:W,isCombo:!0,series1:"1600",series2:"2000"})}const Ie=xe.length>0?xe.map(t=>t.series):["No Data"],le={},Pe={};xe.forEach(t=>{le[t.series]=t.releaseYear,Pe[t.series]=t.manufacturingNode});const ie={};J.forEach(t=>{t.series==="1600"||t.series==="2000"?ie[t.series]="1600/2000":ie[t.series]=t.series});const ae=ft().domain(Ie).range([0,z]).padding(.5),a=Fe(J,t=>t.displayPricePerMM2)||5,h=Math.ceil(a*1.1),m=_e().domain([0,h]).range([A,0]);let M=[],N=0;ge&&J.length>0&&(M=xe.map(t=>{const n=t.manufacturingNode,X=t.releaseYear,W=t.series;if(!n||!X||!ct[n]||!ae(W))return null;const s=70686*({40:.85,28:.8,16:.75,12:.7,8:.65,5:.6}[n]||.7);if(s<=0)return null;const b=ct[n]/s,{multiplier:G,type:K}=pe(X),ve=b*G;return{series:W,node:n,year:X,xPos:ae(W),pricePerMM2:ve,adjustmentType:K}}).filter(t=>t!==null&&isFinite(t.pricePerMM2)&&t.pricePerMM2>=0),N=Fe(M,t=>t.pricePerMM2)||0,M.sort((t,n)=>t.xPos-n.xPos));const I=Math.ceil((N||1)/.1)*.1,me=_e().domain([0,I]).range([A,0]),w=pt(ae).tickFormat(""),ce=R.append("g").attr("class","x-axis").attr("transform",`translate(0,${A})`).call(w);ce.selectAll(".tick").append("text").attr("y",15).attr("x",0).attr("text-anchor","middle").attr("fill","#ddd").style("font-size","12px").text(t=>t),ce.selectAll(".tick").append("text").attr("y",30).attr("x",0).attr("text-anchor","middle").attr("fill","#aaa").style("font-size","10px").text(t=>le[t]),R.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",z/2).attr("y",A+50).attr("fill","#ddd").style("font-size","12px").text("GPU Generation");const ne=Be(m).tickFormat(t=>`$${t}`);R.append("g").attr("class","y-axis y-axis-left").call(ne);let L="GPU Price per Die Area ($/mm²)";const{type:r}=pe("2024");if(r.includes("Real Wage")?L="GPU Price/Area ($/mm², Scaled by Real Wage vs 2024)":r.includes("CPI Adj.")?L=`GPU Price/Area ($/mm², ${Ee.base_year} USD)`:r.includes("Nominal Wage")&&(L="GPU Price/Area ($/mm², Scaled by Nominal Wage vs 2024)"),R.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-55).attr("x",-310/2).attr("fill","#ddd").style("font-size","12px").text(L),ge&&M.length>0){const t=Ft(me).tickFormat(n=>`$${n.toFixed(2)}`).ticks(5);R.append("g").attr("class","y-axis y-axis-right").attr("transform",`translate(${z}, 0)`).call(t).selectAll("text").attr("fill","#aaaaaa"),R.append("text").attr("class","y-axis-label-right").attr("text-anchor","middle").attr("transform",`translate(${z+45}, ${A/2}) rotate(90)`).attr("fill","#aaaaaa").style("font-size","12px").text("Est. Wafer Price ($/mm²)")}const c=Be(m).tickSize(-710).tickFormat("");R.append("g").attr("class","grid").call(c).selectAll("line").attr("stroke","#e0e0e0").attr("stroke-opacity",.15),R.select(".grid .domain").remove();const e=Array.from(new Set(C.filter(t=>x[t.dieName]).map(t=>t.series))).map(t=>{const n=C.find(W=>W.series===t&&x[W.dieName]),X=n?x[n.dieName]:null;return{series:t,releaseYear:n?n.releaseYear:0,generation:X?X.generation:"Unknown"}}).sort((t,n)=>t.releaseYear-n.releaseYear),l=e.map(t=>t.series),d=tt(at).domain(l),f=R.append("g").attr("class","die-area-legend").attr("transform",`translate(${z+70}, 0)`);f.append("text").attr("x",60).attr("y",-20).attr("font-size","14px").attr("font-weight","bold").attr("fill","#ddd").attr("text-anchor","middle").text("GPU Generation");const o=e.slice().sort((t,n)=>t.series==="1600"&&n.series==="2000"?-1:t.series==="2000"&&n.series==="1600"?1:t.releaseYear-n.releaseYear),re=f.selectAll(".legend-item").data(o).enter().append("g").attr("class","legend-item").attr("transform",(t,n)=>`translate(0, ${n*25})`),Q=(t,n)=>{v&&p&&v(X=>{const W={...X,[n.series]:X[n.series]===!1},i=l.every(s=>W[s]!==!1);return p(i),W})};re.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("fill",t=>y[t.series]!==!1?d(t.series):"#555").attr("stroke","#ddd").attr("stroke-width",1).attr("rx",3).attr("ry",3).attr("cursor","pointer").attr("opacity",t=>y[t.series]!==!1?1:.5).on("click",Q),re.append("text").attr("x",20).attr("y",12).text(t=>`${t.series} (${t.generation})`).style("font-size","12px").style("font-weight","bold").attr("fill",t=>y[t.series]!==!1?"#ddd":"#777").attr("cursor","pointer").on("click",Q);const q=f.append("g").attr("class","legend-item show-all").attr("transform",`translate(0, ${o.length*25+10})`),qe=()=>{if(v&&p){const t=!B,n={};l.forEach(X=>{n[X]=t}),v(n),p(t)}};if(q.append("rect").attr("x",0).attr("y",0).attr("width",15).attr("height",15).attr("stroke","#ddd").attr("fill",B?"#646cff":"transparent").attr("rx",3).attr("ry",3).attr("cursor","pointer").on("click",qe),q.append("text").attr("x",25).attr("y",12).attr("fill","#ddd").style("font-size","12px").text("Show All Generations").attr("alignment-baseline","middle").attr("cursor","pointer").on("click",qe),f.append("text").attr("x",0).attr("y",o.length*25+50).attr("fill","#aaa").style("font-size","11px").text("* Colors represent GPU generations"),f.append("text").attr("x",0).attr("y",o.length*25+75).attr("fill","#aaa").style("font-size","11px").text("* Point sizes proportional"),f.append("text").attr("x",0).attr("y",o.length*25+90).attr("fill","#aaa").style("font-size","11px").attr("dx",8.5).text("to die area (mm²)"),ge&&M.length>0){const t=At().x(n=>n.xPos).y0(A).y1(n=>me(Math.min(n.pricePerMM2,I))).curve(Xt);R.append("path").datum(M).attr("class","wafer-price-area").attr("fill","#cccccc").attr("fill-opacity",.25).attr("stroke","none").attr("d",t),R.append("g").attr("class","wafer-node-labels-top").selectAll(".wafer-node-label-top").data(M).enter().append("text").attr("class","wafer-node-label-top").attr("x",n=>n.xPos).attr("y",-10).attr("text-anchor","middle").attr("fill","#aaaaaa").attr("font-size","10px").attr("font-weight","bold").attr("opacity",.9).text(n=>`${n.node}nm`)}if(J.length>0){const t={};Ie.forEach(i=>{if(i==="1600/2000"){const s=y[1600]!==!1,b=y[2e3]!==!1;s&&b?t[i]=J.filter(G=>G.series==="1600"||G.series==="2000"):s?t[i]=J.filter(G=>G.series==="1600"):b?t[i]=J.filter(G=>G.series==="2000"):t[i]=[]}else i!=="No Data"&&(y[i]!==!1?t[i]=J.filter(s=>ie[s.series]===i):t[i]=[])});const n=Object.fromEntries(Ie.map(i=>[i,ae(i)]));Object.entries(t).forEach(([i,s])=>{const b=n[i];if(!b&&b!==0||s.length===0)return;const G=s.map(K=>K.displayPricePerMM2).filter(K=>K!=null&&isFinite(K)&&K>=0&&K<=h);if(G.length>=2){const K=yt(G),ve=Math.max(.1,(K||0)*1.5);if(!isFinite(ve)||ve<=0){console.warn(`Invalid bandwidth (${ve}) for ${i}. Skipping violin.`);return}const de=40,ue=Ct(G),Ye=Fe(G),Ge=Math.max(0,(ue||0)-ve*2),fe=Math.min(h,(Ye||h)+ve*2);let Le=Dt(Ge,fe,(fe-Ge)/100);if(Le.length<2){const S=et(G)||h/2;if(Le=[...new Set([Math.max(0,S-1),S,Math.min(h,S+1)])].sort(bt),Le.length<2){console.warn(`Could not generate sufficient yValues for KDE for ${i}. Skipping violin.`);return}}const mt=za(Ga(ve),Le)(G),Pt=(Fe(mt,S=>S[1]!=null&&isFinite(S[1])?S[1]:0)||.001)*.01,He=mt.filter(S=>S[0]!=null&&isFinite(S[0])&&S[1]!=null&&isFinite(S[1])&&S[1]>=Pt);if(He.length<2){console.warn(`Not enough valid density points (${He.length}) after KDE for ${i}. Skipping violin.`);return}const st=Fe(He,S=>S[1])||.001;if(st<=0){console.warn(`Max density is zero or negative (${st}) for ${i}. Skipping violin.`);return}const ut=_e().domain([0,st]).range([0,de/2]),De=[];if(He.forEach(S=>{De.push([b-ut(S[1]),m(S[0])])}),[...He].reverse().forEach(S=>{De.push([b+ut(S[1]),m(S[0])])}),De.length>0&&De.push(De[0]),De.length<4){console.warn(`Generated violin path has too few points (${De.length}) for ${i}. Skipping violin.`);return}const Tt=rt().x(S=>S[0]).y(S=>S[1]).curve(Rt);let Re;if(i==="1600/2000"){const S=s.some(Me=>Me.series==="1600");s.some(Me=>Me.series==="2000")&&(!S||y[1600]===!1)?Re=d("2000"):Re=d("1600")}else Re=d(i)||"#ccc";const it=`violin-gradient-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`;let Ke=we.select(`#${it}`);if(Ke.empty()?(Ke=we.append("linearGradient").attr("id",it).attr("gradientTransform","rotate(90)"),Ke.append("stop").attr("offset","0%").attr("stop-color",Re).attr("stop-opacity",.9),Ke.append("stop").attr("offset","100%").attr("stop-color",Re).attr("stop-opacity",.4)):Ke.selectAll("stop").attr("stop-color",Re),R.append("path").datum(De).attr("d",Tt).attr("fill",`url(#${it})`).attr("opacity",.8).attr("stroke",Re).attr("stroke-width",1).attr("stroke-opacity",.8).attr("class",`violin-shape violin-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`).on("mouseover",S=>{const D=et(G),Me=nt(G),Te=yt(G),Ue=s.map(Ve=>Ve.effectivePricePerMM2).filter(Ve=>Ve!=null&&isFinite(Ve)&&Ve>=0&&Ve<=h),gt=Ue.length>0?et(Ue):null,ht=Ue.length>0?nt(Ue):null,{generation:wt,node:kt}=Fa(s,x);u(`.${U}`).style("visibility","visible").style("left",`${S.pageX+15}px`).style("top",`${S.pageY-10}px`).html(`<div class="tooltip-title" style="color: ${Re};">${i} Series</div>
                                       <div class="tooltip-info"><strong>${wt}</strong><br><strong>Node:</strong> ${kt} nm<br>
                                       <div style="margin-top:5px; border-bottom:1px dotted #777; padding-bottom:3px;">
                                           <strong style="color:#a0e6ff;">Full Price/mm²:</strong><br>Mean: $${D?D.toFixed(2):"N/A"}<br>Median: $${Me?Me.toFixed(2):"N/A"}<br>S.D.: $${Te?Te.toFixed(2):"N/A"}</div>
                                       <div style="margin-top:5px; border-bottom:1px dotted #777; padding-bottom:3px;">
                                           <strong style="color:#a0ffb0;">Cut Price/mm²:</strong>
                                           ${gt!==null?`<br>Mean: $${gt.toFixed(2)}`:""}
                                           ${ht!==null?`<br>Median: $${ht.toFixed(2)}`:""}
                                           ${Ue.length>0?`<br>(${Ue.length} cut GPUs)`:"<br>No data"}</div>
                                       <div style="margin-top:5px;"><strong>Sample Size:</strong> ${G.length} GPUs</div></div>`)}).on("mouseout",()=>u(`.${U}`).style("visibility","hidden")),G.length>0){const S=[...G].sort(bt),D={min:Ct(S),q1:S.length>=3?vt(S,.25):void 0,median:nt(S),q3:S.length>=3?vt(S,.75):void 0,max:Fe(S)},Me=R.append("g").attr("class",`violin-stats violin-stats-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`),Te=de/3;if(isFinite(D.median)&&Me.append("line").attr("x1",b-Te/2).attr("x2",b+Te/2).attr("y1",m(D.median)).attr("y2",m(D.median)).attr("stroke","#fff").attr("stroke-width",2).attr("opacity",.9).attr("class","violin-median"),isFinite(D.q1)&&isFinite(D.q3)&&D.q1<=D.q3){const Ue=Math.max(0,m(D.q1)-m(D.q3));Me.append("rect").attr("x",b-Te/2).attr("y",m(D.q3)).attr("width",Te).attr("height",Ue).attr("fill","#fff").attr("opacity",.4).attr("class","violin-iqr")}isFinite(D.min)&&isFinite(D.q1)&&D.min<D.q1&&(Me.append("line").attr("x1",b).attr("x2",b).attr("y1",m(D.min)).attr("y2",m(D.q1)).attr("stroke","#fff").attr("stroke-width",1).attr("class","violin-whisker"),Me.append("line").attr("x1",b-Te/4).attr("x2",b+Te/4).attr("y1",m(D.min)).attr("y2",m(D.min)).attr("stroke","#fff").attr("stroke-width",1).attr("opacity",.7).attr("class","violin-min-cap")),isFinite(D.max)&&isFinite(D.q3)&&D.max>D.q3&&(Me.append("line").attr("x1",b).attr("x2",b).attr("y1",m(D.q3)).attr("y2",m(D.max)).attr("stroke","#fff").attr("stroke-width",1).attr("class","violin-whisker"),Me.append("line").attr("x1",b-Te/4).attr("x2",b+Te/4).attr("y1",m(D.max)).attr("y2",m(D.max)).attr("stroke","#fff").attr("stroke-width",1).attr("opacity",.7).attr("class","violin-max-cap"))}}else s.length>0&&(console.log(`Not enough valid data points (${G.length}) for violin plot for ${i}.`),R.append("text").attr("x",b).attr("y",A/2).attr("text-anchor","middle").attr("fill","#777").style("font-size","10px").text("Too few data points").attr("class",`violin-note violin-note-${i.replace(/[^a-zA-Z0-9-_]/g,"-")}`))});const X=Ut().domain([0,300,800]).range([1,4,11]).clamp(!0),W=[...J].sort((i,s)=>s.dieSizeMM2-i.dieSizeMM2);R.selectAll(".die-area-dot").data(W.filter(i=>y[i.series]!==!1),i=>i.model).join(i=>i.append("circle").attr("class",s=>`die-area-dot dot-${(ie[s.series]||s.series).replace(/[^a-zA-Z0-9-_]/g,"-")}`).attr("cx",s=>ae(ie[s.series]||s.series)).attr("cy",s=>m(s.displayPricePerMM2)).attr("fill",s=>d(s.series)).attr("stroke","#fff").attr("stroke-width",.5).attr("r",0).call(s=>s.transition().duration(500).attr("r",b=>X(b.dieSizeMM2))),i=>i.attr("class",s=>`die-area-dot dot-${(ie[s.series]||s.series).replace(/[^a-zA-Z0-9-_]/g,"-")}`).transition().duration(500).attr("cx",s=>ae(ie[s.series]||s.series)).attr("cy",s=>m(s.displayPricePerMM2)).attr("fill",s=>d(s.series)).attr("r",s=>X(s.dieSizeMM2)).attr("opacity",.85),i=>i.transition().duration(500).attr("r",0).attr("opacity",0).remove()).attr("opacity",.85).on("mouseover",function(i,s){u(`.${U}`).style("visibility","visible").style("left",`${i.pageX+15}px`).style("top",`${i.pageY-10}px`);let b="";s.adjustmentType!=="Nominal"&&(b=` <span style="color: #aaa;">($${($?s.rawEffectivePricePerMM2:s.rawPricePerMM2).toFixed(2)} nominal)</span>`),u(`.${U}`).html(`<div class="tooltip-title" style="color: ${d(s.series)};">${s.model}</div>
                          <div class="tooltip-info">
                              <strong>Series:</strong> ${s.series} (${s.generation})<br>
                              <strong>MSRP:</strong> ${s.originalMsrp?`$${s.originalMsrp.toLocaleString()}`:"N/A"}
                              ${s.adjustmentType!=="Nominal"?`<br><strong>Adj. MSRP (${s.adjustmentType}):</strong> $${s.adjustedMsrp.toFixed(0)}`:""}<br>
                              <strong>Die Size:</strong> ${s.dieSizeMM2?`${s.dieSizeMM2.toLocaleString()} mm²`:"N/A"}<br>
                              <strong>CUDA:</strong> ${s.cudaCores?s.cudaCores.toLocaleString():"N/A"} / ${s.fullCudaCores?s.fullCudaCores.toLocaleString():"N/A"} (${s.dieUtilizationRatio!=null?`${(s.dieUtilizationRatio*100).toFixed(1)}%`:"N/A"})<br>
                              <strong>${$?"Cut":"Full"} Price/mm²:</strong> ${s.displayPricePerMM2!=null&&isFinite(s.displayPricePerMM2)?`$${s.displayPricePerMM2.toFixed(2)}`:"N/A"}${b}<br>
                              <span style="color: #ccc; font-size: 0.9em;">(${s.adjustmentType})</span><br>
                              <strong>Die:</strong> ${s.dieName||"N/A"} (${s.manufacturingNode||"N/A"}nm)<br>
                              <strong>Year:</strong> ${s.releaseYear||"N/A"}
                          </div>`),u(this).attr("stroke-width",2).attr("opacity",1)}).on("mouseout",function(i,s){u(`.${U}`).style("visibility","hidden"),u(this).attr("stroke-width",.5).attr("opacity",.85)})}else R.append("text").attr("x",z/2).attr("y",A/2).attr("text-anchor","middle").attr("fill","#ddd").style("font-size","14px").text("No data to display based on current filters.");return()=>{const t=u(`.${U}`);t.size()&&t.remove()}},[C,x,P,y,$,k,O,ge,v,p]),F.jsx("svg",{ref:P,style:{display:"block",margin:"20px auto"}})}function za(P,C){return function(x){return C.map(T=>[T,et(x,g=>P(T-g))])}}function Ga(P){return function(C){return Math.abs(C/=P)<=1?.75*(1-C*C)/P:0}}function Fa(P,C){let x="Unknown",T="Unknown";if(!P||P.length===0)return{generation:x,node:T};const g={},y={};P.forEach(p=>{const $=C[p.dieName];$&&$.generation&&(g[$.generation]=(g[$.generation]||0)+1),p.manufacturingNode&&(y[p.manufacturingNode]=(y[p.manufacturingNode]||0)+1)});let v=0;Object.entries(g).forEach(([p,$])=>{$>v&&(v=$,x=p)});let B=0;return Object.entries(y).forEach(([p,$])=>{$>B&&(B=$,T=p)}),{generation:x,node:T}}const We=["90 Ti","90","80 Ti","80","70 Ti","70","60 Ti","60","50 Ti","50","30"],dt=P=>{const C=P.toUpperCase(),x=C.match(/(\d{2,4})/);if(!x)return null;const T=x[1],g=parseInt(T.slice(-2),10);let y=null;return g>=90?y="90":g>=80?y="80":g>=70?y="70":g>=60?y="60":g>=50?y="50":g>=30&&(y="30"),y?C.includes(" TI")?`${y} Ti`:y:null};function Aa(){const[P,C]=_.useState(!1),[x,T]=_.useState(!1),g=_.useRef(),[y,v]=_.useState({}),[B,p]=_.useState({}),[$,Z]=_.useState(!0),[k,ye]=_.useState(null),[O,Ae]=_.useState({x:0,y:0});_.useRef();const ge=_.useRef(),[ee,Ce]=_.useState({"90 Ti":!0,90:!0,"80 Ti":!0,80:!0,"70 Ti":!1,70:!0,"60 Ti":!1,60:!0,"50 Ti":!1,50:!0,30:!1}),[H,Y]=_.useState(!0),[oe,te]=_.useState(!0),[z,A]=_.useState({PlayStation:!0,Xbox:!0}),[we,ze]=_.useState(100),R=_.useRef(),[U,j]=_.useState(!0);_.useEffect(()=>{if(Object.keys(B).length===0&&je&&je.length>0){const E=Array.from(new Set(je.map(be=>be.series))),V={};E.forEach(be=>{V[be]=!0}),p(V);const se={};E.forEach(be=>{je.filter(J=>J.series===be).some(J=>J.specialFlagship)&&(se[be]=!1)}),v(se)}if(Object.keys(ee).length===0&&We&&We.length>0){const E={};We.forEach(V=>{E[V]=!0}),Ce(E),Y(!0)}if(Object.keys(z).length===0&&Je&&Je.length>0){const E=Array.from(new Set(Je.map(se=>se.platform))),V={};E.forEach(se=>{V[se]=!0}),A(V)}},[je,Je,We,B,ee,z]);const Ne=_.useCallback((E,V,se)=>{},[]),he=_.useCallback(()=>{},[]);return F.jsxs("div",{className:"App",children:[F.jsx("h1",{style:{textAlign:"center",margin:"20px 0"},children:"Nvidia's Core-ner Cutting"}),F.jsx("p",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 20px",color:"#ddd"},children:"This is an open-source project. Please feel free to have a look at the source code and contribute!"}),F.jsx("p",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 20px",color:"#ddd"},children:"Each plot can have elements toggled on/off by click on the legend."}),F.jsx("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto 20px",color:"#ddd"},children:"This visualization tracks NVIDIA's CUDA core counts across GPU generations, tracking how lower-tier cards receive proportionally fewer cores over time compared to flagship models."}),F.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",margin:"10px auto"},children:[F.jsx("button",{onClick:()=>C(!P),style:{padding:"10px 20px",cursor:"pointer"},children:P?"Show Absolute Tiers":"Align Flagships (Normalize Start)"}),!P&&F.jsx("button",{onClick:()=>T(!x),style:{padding:"10px 20px",cursor:"pointer",backgroundColor:x?"#646cff":"#444"},children:x?"Linear Scale":"Log Scale"}),F.jsx("a",{href:"https://github.com/mr-september/Nvidias_Core-ner_Cutting",target:"_blank",rel:"noopener noreferrer",title:"View on GitHub",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#242424",transition:"background-color 0.3s ease"},onMouseOver:E=>E.currentTarget.style.backgroundColor="#444",onMouseOut:E=>E.currentTarget.style.backgroundColor="#242424",children:F.jsx("svg",{height:"24",width:"24",viewBox:"0 0 16 16",fill:"#ffffff",children:F.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})})]}),F.jsx($a,{svgRef:g,gpuData:je,columnOrder:We,getTierFromModel:dt,toggleMode:P,useLogScale:x,specialFlagshipActive:y,setSpecialFlagshipActive:v,activeGenerations:B,setActiveGenerations:p,showAllCudaGenerations:$,setShowAllCudaGenerations:Z,tooltipData:k,tooltipPosition:O,setTooltipData:ye,setTooltipPosition:Ae,handleColumnHover:Ne,handleColumnLeave:he}),F.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"Special flagships are defined as those that launch 1-2 years after the original flagship. 780 Ti is an exception where it launched only 6 months after the 780. But hey, you have the power to decide which to use."}),F.jsxs("div",{className:"vram-chart-section",style:{marginTop:"80px",paddingTop:"20px",borderTop:"1px solid #444"},children:[F.jsx("h2",{style:{textAlign:"center",margin:"20px 0"},children:"VRAM Evolution Over Time"}),F.jsx("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto 20px",color:"#ddd"},children:"This chart shows how video memory capacity has evolved over time across different GPU classes and consoles."}),F.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:F.jsx(Pa,{vramSvgRef:ge,gpuData:je,consoleData:Je,columnOrder:We,getTierFromModel:dt,selectedClasses:ee,setSelectedClasses:Ce,showAllGenerations:H,setShowAllGenerations:Y,showConsoleData:oe,setShowConsoleData:te,visibleConsolePlatforms:z,setVisibleConsolePlatforms:A,memoryAllocationPercentage:we,setMemoryAllocationPercentage:ze})})]}),F.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"Console memory represents total system memory. Unified memory systems (PS4, Xbox One, and newer) dynamically allocate between CPU and GPU. The slider estimates VRAM based on this allocation percentage. Older consoles with dedicated VRAM are shown at their fixed amount regardless of slider position."}),F.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"The xx60 class is the only class (so far) that had a regression in VRAM capacity."}),F.jsxs("div",{className:"die-area-chart-section",style:{marginTop:"80px",paddingTop:"20px",borderTop:"1px solid #444"},children:[F.jsx("h2",{style:{textAlign:"center",margin:"20px 0"},children:"GPU Price per Die Area Over Time"}),F.jsx("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto 20px",color:"#ddd"},children:"This chart shows the evolution of price (launch MSRP in USD) per die area ($/mm²) across GPU generations. Individual GPUs are plotted as scatter points and distributions as violin plots."}),F.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:F.jsx(Ya,{dieAreaSvgRef:R,gpuData:je,gpuDieData:Sa,columnOrder:We,getTierFromModel:dt,activeGenerations:B,setActiveGenerations:p,showAllDieGenerations:U,setShowAllDieGenerations:j})})]}),F.jsx("p",{style:{fontSize:"0.9em",color:"#aaa",maxWidth:"800px",margin:"15px auto 0",fontStyle:"italic",textAlign:"center"},children:"Price per die area ($/mm²) tracks manufacturing efficiency and pricing strategy across GPU generations. Lower values may indicate better cost efficiency and/or competitive pricing."})]})}It.createRoot(document.getElementById("root")).render(F.jsx(_.StrictMode,{children:F.jsx(Aa,{})}));
